<!doctype html>
<html lang="hi">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/svg+xml" href="logo.png">
  <title>Car Mechanic &amp; Repair Services in Sonipat | Sonipat Home Service</title>
  <!-- SEO Meta Tags -->
  <meta name="description" content="Professional car mechanic and repair services in Sonipat, Murthal, Bahalgarh, Kundli, Rai, Ganaur. Expert car maintenance at your doorstep. Call 8816014071">
  <meta name="keywords" content="car mechanic Sonipat, car repair Sonipat,Sonipat car mechanic,auto repair,best car mechanic,Best car service in Sonipat,car AC repair in sonipat,car dent removal,car denting painting,car engine repair,car repair near me,car service,home services in Sonipat">
  <meta name="author" content="Sonipat Home Service">
  <meta name="robots" content="index, follow">
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
        body {
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Subtle light background */
            margin-top: 0 !important;
            padding-top: 0 !important;
        }
        
        /* --- Gradient Colors for Header and Primary Buttons (Deep Blue/Indigo) --- */
        .gradient-bg {
            background: linear-gradient(135deg, #0f62fe 0%, #1e40af 100%); 
        }

        header {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
        }
        
        /* --- ULTRAMAX STYLING FOR MAIN SECTION --- */
        .ultramax-container {
            /* Futuristic semi-transparent background */
            background: rgba(255, 255, 255, 0.85); 
            backdrop-filter: blur(8px);
            border-radius: 20px; 
            padding: 1.5rem;
            
            /* Glowing Border/Shadow */
            border: 1px solid rgba(15, 98, 254, 0.5);
            box-shadow: 
                0 0 15px rgba(15, 98, 254, 0.6),  /* Soft outer glow */
                inset 0 0 10px rgba(15, 98, 254, 0.3); /* Inner soft glow */
            transition: all 0.3s ease;
        }
        
        .ultramax-container:hover {
             box-shadow: 
                0 0 25px rgba(15, 98, 254, 0.9),
                0 0 5px rgba(15, 98, 254, 0.9), 
                inset 0 0 15px rgba(15, 98, 254, 0.5);
        }
        
        /* Animated Car Section (REMOVED) */
        
        /* --- Service Card (Model Selection) --- */
        .service-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 3px solid transparent;
            transform-style: preserve-3d;
            background: #ffffff;
            box-shadow: 
                0 10px 20px rgba(0,0,0,0.05),
                0 5px 15px rgba(0,0,0,0.02);
            border-radius: 16px; 
            position: relative;
            overflow: hidden;
            margin: 8px;
            cursor: pointer;
        }
        
        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 
                0 20px 40px rgba(15,98,254,0.2), 
                0 10px 20px rgba(0,0,0,0.1),
                inset 0 2px 0 rgba(255,255,255,0.9);
            border-color: #0f62fe; 
        }
        
        /* --- Primary Button (AC Style) --- */
        .btn-primary {
            background: linear-gradient(135deg, #0f62fe, #1e40af);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(15,98,254,0.4);
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #1e40af, #11368e);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(15,98,254,0.6);
        }
        
        /* --- Utility classes for Modals and Centering --- */
        .popup-overlay {
            backdrop-filter: blur(10px);
            animation: fadeIn 0.3s ease;
            /* Added flex properties for centering */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            position: fixed;
            inset: 0;
            z-index: 50;
        }
        
        .popup-content {
            animation: slideUp 0.3s ease;
            background: #ffffff;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            max-height: 90vh; /* Allow content to scroll */
            overflow-y: auto;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { transform: translateY(50px) scale(0.9); opacity: 0; }
            to { transform: translateY(0) scale(1); opacity: 1; }
        }
        
        /* Stylish Search Input (AC Style Refit) */
        .stylish-search-input {
             width: 100%; 
             max-width: 400px; 
             padding: 0.75rem 1.25rem; 
             border: 2px solid #cbd5e0; 
             border-radius: 25px; 
             font-size: 1rem; 
             text-align: left; 
             transition: all 0.3s;
             box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
        }
        
        .stylish-search-input:focus {
             border-color: #0f62fe;
             box-shadow: 0 0 0 3px rgba(15,98,254,0.3);
             outline: none;
        }
        
        .service-detail-popup-item {
            background: #fff;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            transition: all 0.2s ease;
        }

        .service-detail-popup-item:hover {
            background: #e0f2fe;
        }
        
        .form-input {
             transition: all 0.3s ease;
        }

        .form-input:focus {
             outline: none;
             border-color: #0f62fe;
             box-shadow: 0 0 0 3px rgba(15,98,254,0.1);
        }
        
        .time-slots {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .time-slot {
            padding: 10px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            background: #f1f5f9; /* Light background */
            cursor: pointer;
            text-align: center;
            font-weight: 600;
            transition: all 0.3s ease;
            color: #1f2937;
        }
        
        .time-slot:hover {
            border-color: #0f62fe;
            background: #e0f2fe; /* Light blue hover */
        }
        
        .time-slot.selected {
            background: linear-gradient(135deg, #0f62fe 0%, #1e40af 100%);
            color: white;
            border-color: #1e40af;
        }

        /* Info Card Styles */
        .info-card-section {
            padding: 24px;
            background-color: #fff;
            border-top: 1px solid #e2e8f0;
        }
        .info-card {
            background: #f0f9ff;
            border-left: 4px solid #3b82f6;
            padding: 16px;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }
        .info-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(15,98,254,0.2);
        }

        /* Footer Marquee Style (From AC file) */
        .services-slider {
            overflow: hidden;
            white-space: nowrap;
            padding: 10px 0;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
            background: #374151;
        }

        .services-track {
            display: inline-block;
            animation: marquee 30s linear infinite;
        }

        .services-track a, .services-track span {
            display: inline-block;
            color: #d1d5db; /* light gray */
            padding: 0 15px;
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            transition: color 0.3s;
        }

        .services-track a:hover {
            color: #60a5fa; /* blue-400 */
        }

        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        /* Heading Style */
        .section-title {
            text-align: center;
            font-size: 32px; /* Large font size */
            font-weight: 800; /* Extra bold */
            color: #1e40af; /* Deep blue color */
            margin-bottom: 24px; /* Margin bottom */
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1); /* Subtle shadow */
            padding: 10px 0;
        }
        
        /* iPhone 12 Mini Specific Responsive Fixes */
        @media (max-width: 375px) {
            .stylish-search-input {
                 padding: 0.6rem 1rem;
                 font-size: 0.9rem;
            }
             .popup-content {
                width: 95%; 
             }
        }
        
        /* Loading Overlay Style */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(5px);
            z-index: 9000;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            color: #0f62fe;
            font-size: 1.2rem;
            font-weight: bold;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="min-h-full bg-gray-50">
  <!-- Header (AC Style - Retained) -->
  <header class="gradient-bg text-white shadow-2xl sticky top-0 z-40">
   <div class="container mx-auto px-4 py-4">
    <div class="flex justify-between items-center"><a href="index.html" class="flex items-center space-x-3 hover:opacity-90 transition-opacity"><img src="logo.png" alt="Sonipat Home Service Logo" class="h-10 w-10 sm:h-12 sm:w-12 rounded-full shadow-lg border border-white/50">
      <div>
       <h1 id="company-name" class="text-xl sm:text-2xl font-extrabold tracking-tight"> <span class="text-yellow-300">CarMechanic</span></h1>
       <p class="text-sm font-semibold opacity-90">Professional Car Repair & Maintenance</p>
      </div></a>
     <div class="flex items-center space-x-4">
      <!-- Desktop Contact Side Bar -->
      <div class="text-right hidden md:block border-l pl-4 border-white/30">
       <a href="tel:8816014071" class="lg:text-lg font-bold hover:text-yellow-300 transition-colors">ğŸ“ 8816014071</a>
       <p id="header-email-address" class="text-xs opacity-80 mt-1">care@sonipathomeservice.com</p>
      </div>
      <!-- Cart Button with Pop -->
      <button id="cart-btn" class="relative bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-md" onclick="showCart()"> <span class="flex items-center space-x-2">
        <i class="fas fa-shopping-cart w-5 h-5"></i>
        <span class="hidden sm:inline">Cart</span> <span id="cart-count" class="bg-red-500 text-white rounded-full px-2 py-0.5 text-xs hidden font-bold">0</span> </span> </button>
     </div>
    </div>
   </div>
  </header>
  <!-- Animated Car Section (REMOVED) -->
  <!-- Info Cards Section (Retained - AC Style) -->
  <section class="info-card-section">
   <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
     <div class="info-card"><div class="flex items-center space-x-3"><span class="text-3xl text-blue-600"><i class="fas fa-bolt"></i></span>
        <div>
         <h4 class="font-extrabold text-lg text-gray-800">Doorstep Service</h4>
         <p class="text-sm text-gray-600">Free pickup and drop-off service available.</p>
        </div>
       </div></div>
     <div class="info-card"><div class="flex items-center space-x-3"><span class="text-3xl text-green-600"><i class="fas fa-shield-alt"></i></span>
        <div>
         <h4 class="font-extrabold text-lg text-gray-800">Genuine Parts</h4>
         <p class="text-sm text-gray-600">Original spare parts with warranty.</p>
        </div>
       </div></div>
     <div class="info-card"><div class="flex items-center space-x-3"><span class="text-3xl text-yellow-600"><i class="fas fa-user-shield"></i></span>
        <div>
         <h4 class="font-extrabold text-lg text-gray-800">Verified Mechanics</h4>
         <p class="text-sm text-gray-600">Background checked and highly trained experts.</p>
        </div>
       </div></div>
    </div>
   </div>
  </section>
  <!-- Main Content (Search and Booking Trigger) -->
  <div class="container py-8 mx-auto">
   <div class="max-w-5xl mx-auto p-4 bg-white rounded-xl shadow-lg ultramax-container">
    <h3 class="section-title" id="services-title">Car Brand & Model</h3>
    <!-- Search Box (Centered) -->
    <div style="text-align: center; margin-bottom: 2rem;">
     <div style="background: transparent; padding: 1.5rem; border-radius: 15px; max-width: 800px; margin: 0 auto;">
      <h4 style="margin-bottom: 0.8rem; color: #2c3e50; font-size: 1.1rem;">ğŸ” Search Car Model (Direct Booking)</h4><input type="text" id="search-input" placeholder="Type car name (e.g., Alto, Swift, Nexon...)" class="stylish-search-input" oninput="liveSearch(this.value)">
      <div id="live-search-results" class="space-y-2 mt-4 max-h-40 overflow-y-auto w-full max-w-sm mx-auto"></div>
      <!-- Empty Cart Notice -->
      <div id="cart-empty-notice" class="mt-4 p-3 bg-gray-100 text-gray-600 rounded-lg text-sm">
       à¤•à¥ƒà¤ªà¤¯à¤¾ à¤…à¤ªà¤¨à¥€ à¤•à¤¾à¤° à¤•à¤¾ à¤¨à¤¾à¤® à¤Ÿà¤¾à¤‡à¤ª à¤•à¤°à¥‡à¤‚ à¤”à¤° à¤¸à¤°à¥à¤µà¤¿à¤¸ à¤¬à¥à¤• à¤•à¤°à¥‡à¤‚à¥¤
      </div>
     </div>
    </div>
   </div>
  </div>
  <!-- Popups -->
  <!-- 2. Service Detail Popup -->
  <div id="service-detail-popup" class="fixed inset-0 bg-black bg-opacity-50 popup-overlay hidden z-50">
   <!-- Centering Fix: Use items-center and h-full -->
   <div class="flex items-center justify-center h-full p-2 py-4">
    <div class="bg-white rounded-xl shadow-2xl max-w-lg w-full popup-content" style="max-height: 95vh; overflow-y: auto;">
     <div class="sticky top-0 bg-white p-4 border-b flex justify-between items-center z-10">
      <h3 class="text-xl font-extrabold text-gray-800" id="detail-popup-title">Car Service Options</h3><button id="close-detail-popup" class="text-gray-500 hover:text-red-600 transition-colors p-1 rounded-full bg-gray-100" onclick="hideServiceDetailPopup()">
       <svg class="w-5 h-5" fill="currentColor" viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
       </svg></button>
     </div>
     <div class="p-4">
      <div id="detailed-service-list" class="space-y-4">
       <!-- Detailed services will be loaded here -->
      </div>
     </div>
    </div>
   </div>
  </div>
  <!-- 3. Checkout Form Popup -->
  <div id="checkout-popup" class="fixed inset-0 bg-black bg-opacity-50 popup-overlay hidden z-50">
   <div class="popup-content" style="max-width: 500px; min-width: 300px;">
    <div class="sticky top-0 bg-white p-4 border-b flex justify-between items-center z-10">
     <h3 class="text-xl font-extrabold" id="modal-service-title">Book Service</h3><button id="close-checkout" class="text-gray-500 hover:text-red-600 transition-colors p-1 rounded-full bg-gray-100" onclick="hideCheckoutPopup()">
      <svg class="w-5 h-5" fill="currentColor" viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
      </svg></button>
    </div>
    <div class="p-4">
     <div id="success-message-ui" class="hidden bg-green-100 text-green-800 p-4 rounded-xl mb-4 font-semibold border-l-4 border-green-500"></div>
     <div id="error-message-ui" class="hidden bg-red-100 text-red-800 p-4 rounded-xl mb-4 font-semibold border-l-4 border-red-500"></div>
     <form id="checkout-form" class="space-y-4">
      <div class="space-y-2">
       <div><label class="block text-sm font-medium text-gray-700 mb-1">Customer Name *</label> <input type="text" id="customer-name" required class="form-input px-3 py-2 text-base border-2 border-gray-300 rounded-lg" placeholder="Enter your full name">
       </div>
       <div><label class="block text-sm font-medium text-gray-700 mb-1">Mobile Number *</label> <input type="tel" id="mobile-number" required pattern="[0-9]{10}" maxlength="10" class="form-input px-3 py-2 text-base border-2 border-gray-300 rounded-lg" placeholder="Enter 10-digit mobile number">
       </div>
       <div><label class="block text-sm font-medium text-gray-700 mb-1">Email ID *</label> <input type="email" id="email-id" required class="form-input px-3 py-2 text-base border-2 border-gray-300 rounded-lg" placeholder="Enter your email address">
       </div>
      </div>
      <div class="space-y-2">
       <div><label class="block text-sm font-medium text-gray-700 mb-1">Full Address *</label> <textarea id="full-address" rows="3" required class="form-input resize-none px-3 py-2 text-base border-2 border-gray-300 rounded-lg" placeholder="Enter your complete address (For Pick & Drop)"></textarea>
       </div>
       <div class="grid grid-cols-2 gap-4">
        <div><label class="block text-sm font-medium text-gray-700 mb-1">Landmark</label> <input type="text" id="landmark" class="form-input px-3 py-2 text-base border-2 border-gray-300 rounded-lg" placeholder="Nearby landmark (optional)">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1">Pincode *</label> <input type="text" id="pincode" pattern="[0-9]{6}" maxlength="6" required class="form-input px-3 py-2 text-base border-2 border-gray-300 rounded-lg" placeholder="6-digit pincode">
        </div>
       </div>
      </div>
      <div class="space-y-2 border-t pt-4">
       <div><label class="block text-sm font-medium text-gray-700 mb-1">Preferred Date *</label> <input type="date" id="preferred-date" required class="form-input px-3 py-2 text-base border-2 border-gray-300 rounded-lg">
       </div>
       <div><label class="block text-sm font-medium text-gray-700 mb-1">Preferred Time *</label>
        <div class="time-slots">
         <div class="time-slot" data-time="09:00-11:00">
          9:00 AM - 11:00 AM
         </div>
         <div class="time-slot" data-time="11:00-13:00">
          11:00 AM - 1:00 PM
         </div>
         <div class="time-slot" data-time="13:00-15:00">
          1:00 PM - 3:00 PM
         </div>
         <div class="time-slot" data-time="15:00-17:00">
          3:00 PM - 5:00 PM
         </div>
         <div class="time-slot" data-time="17:00-19:00">
          5:00 PM - 7:00 PM
         </div>
         <div class="time-slot" data-time="19:00-21:00">
          7:00 PM - 9:00 PM
         </div>
        </div><input type="hidden" id="preferred-time" required>
       </div>
      </div>
      <div class="border-t pt-4 mt-4">
       <h4 class="text-lg font-extrabold mb-3">Payment Summary</h4>
       <div class="space-y-2 mb-4 bg-blue-50 p-3 rounded-lg border border-blue-200">
        <div class="flex justify-between items-center text-sm"><span class="text-gray-700 font-semibold">Service Price:</span> <span class="font-extrabold">â‚¹<span id="checkout-total">0</span></span>
        </div>
        <div class="flex justify-between items-center text-blue-700 text-sm"><span class="font-semibold">Booking Charge (Non-refundable):</span> <span class="font-extrabold">â‚¹<span id="checkout-booking-charge">99</span></span>
        </div>
        <div class="flex justify-between items-center text-green-700 text-sm"><span class="font-semibold">Onsite Balance:</span> <span class="font-extrabold">â‚¹<span id="checkout-onsite-balance">0</span></span>
        </div>
        <div class="border-t border-blue-300 pt-3 flex justify-between items-center mt-2"><span class="font-extrabold text-xl text-gray-900">Pay Now:</span> <span class="font-extrabold text-xl text-red-600">â‚¹<span id="checkout-pay-now">99</span></span>
        </div>
       </div>
       <div class="bg-yellow-50 border border-yellow-300 rounded-xl p-3 mb-4">
        <p class="text-xs text-yellow-800"><strong>Note:</strong> You are paying only the booking charge (â‚¹<span id="note-booking-charge">99</span>) now. <span id="onsite-note">Remaining amount will be paid to the mechanic after service completion.</span></p>
       </div><button type="submit" id="pay-now" class="w-full btn-primary text-white py-3 rounded-xl font-extrabold text-lg transform hover:scale-[1.01] transition-transform"> <span id="checkout-button-text">Pay â‚¹99 Booking Charge</span> </button>
      </div>
     </form>
    </div>
   </div>
  </div>
  <!-- Loading Overlay -->
  <div id="loading-overlay" class="loading-overlay hidden">
   <div class="animate-spin rounded-full h-12 w-12 border-b-4 border-blue-700 mb-4"></div>
   Processing your booking...
  </div>
  <!-- Footer (AC Style) -->
  <footer class="bg-gray-900 text-white pt-12">
   <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
     <div>
      <h4 class="text-xl font-extrabold mb-4 text-blue-400">Contact Information</h4>
      <div class="space-y-2 text-sm">
       <p class="flex items-center">ğŸ“ <span class="ml-2 font-semibold" id="footer-phone">8816014071</span></p>
       <p class="flex items-center">âœ‰ï¸ <span class="ml-2" id="footer-email">care@sonipathomeservice.com</span></p>
       <p class="flex items-center">ğŸ“ <span class="ml-2" id="footer-address">128/1, Sainipura, Sonipat</span></p>
      </div>
     </div>
     <div>
      <h4 class="text-xl font-extrabold mb-4 text-blue-400">Quick Links</h4>
      <ul class="space-y-2 text-sm">
       <li><a href="index.html" class="hover:text-blue-400 transition-colors">â€¢ Home Page</a></li>
       <li><a href="policy.html" class="hover:text-blue-400 transition-colors">â€¢ Privacy Policy</a></li>
       <li><a href="terms.html" class="hover:text-blue-400 transition-colors">â€¢ Terms &amp; Conditions</a></li>
       <li><a href="refund.html" class="hover:text-blue-400 transition-colors">â€¢ Refund Policy</a></li>
      </ul>
     </div>
     <div>
      <h4 class="text-xl font-extrabold mb-4 text-blue-400">Follow Us</h4>
      <div class="flex space-x-4 text-2xl"><a href="https://facebook.com/sonipathomeservice" target="_blank" rel="noopener noreferrer" class="hover:text-blue-400 transition-colors"><i class="fab fa-facebook-f"></i></a> <a href="https://instagram.com/sonipathomeservice" target="_blank" rel="noopener noreferrer" class="hover:text-blue-400 transition-colors"><i class="fab fa-instagram"></i></a> <a href="https://wa.me/918816014071" target="_blank" rel="noopener noreferrer" class="hover:text-blue-400 transition-colors"><i class="fab fa-whatsapp"></i></a>
      </div>
     </div>
    </div>
    <!-- Marquee Slider for All Services -->
    <div style="background: #374151; padding: 15px 0; margin-top: 30px; border-radius: 10px;">
     <div style="max-width: 1200px; margin: 0 auto;">
      <h4 style="text-align: center; color: #60a5fa; margin-bottom: 10px; font-size: 16px; font-weight: bold;">All Our Services</h4>
      <div class="services-slider">
       <div class="services-track"><a href="book-ac-services.html" target="_blank" rel="noopener noreferrer">â„ï¸ AC Installation &amp; Repair</a> <a href="book-fridge-refrigrator-services.html" target="_blank" rel="noopener noreferrer">ğŸ§Š Refrigerator Repair</a> <a href="book-washing-machine-services.html" target="_blank" rel="noopener noreferrer">ğŸŒ€ Washing Machine Repair</a> <a href="book-tv-repair.html" target="_blank" rel="noopener noreferrer">ğŸ“º TV Repair</a> <a href="book-geyser-services.html" target="_blank" rel="noopener noreferrer">ğŸ”¥ Geyser Repair</a> <a href="electricianservice.html" target="_blank" rel="noopener noreferrer">âš¡ Electrician Service</a> <a href="book-ro-serrvice.html" target="_blank" rel="noopener noreferrer">ğŸ’§ RO Water Purifier</a> <a href="book-chimney-cleaning.html" target="_blank" rel="noopener noreferrer">ğŸ  Chimney Cleaning</a> <a href="book-safty-tank-service.html" target="_blank" rel="noopener noreferrer">ğŸš½ Septic Tank Cleaning</a> <a href="book-sewerage-unblock-service.html" target="_blank" rel="noopener noreferrer">ğŸ”§ Sewerage Unblocking</a> <a href="book-pasti-control-service.html" target="_blank" rel="noopener noreferrer">ğŸ› Pest Control Service</a> <a href="book-Sofa-cleaning.html" target="_blank" rel="noopener noreferrer">ğŸ›‹ï¸ Sofa Cleaning</a> <a href="watertankcleaning.html" target="_blank" rel="noopener noreferrer">ğŸª£ Water Tank Cleaning</a> <a href="book-wifi-service.html" target="_blank" rel="noopener noreferrer">ğŸ“¶ Wi-Fi Setup</a> <a href="Book-dth-installation-service.html" target="_blank" rel="noopener noreferrer">ğŸ“¡ DTH Installation</a> <a href="book-cctv-service.html" target="_blank" rel="noopener noreferrer">ğŸ“¹ CCTV Installation</a> <a href="book-borewell-service.html" target="_blank" rel="noopener noreferrer">ğŸ•³ï¸ Borewell Service</a> <a href="book-chinai-mistri.html" target="_blank" rel="noopener noreferrer">ğŸ§± Masonry Work</a> <a href="book-building-material-supply.html" target="_blank" rel="noopener noreferrer">ğŸ—ï¸ Building Material Supply</a> <a href="book-solar-installation.html" target="_blank" rel="noopener noreferrer">â˜€ï¸ Solar Panel Installation</a> <a href="book-ro-water-services-services.html" target="_blank" rel="noopener noreferrer">ğŸ’¦ RO Water Service</a> <a href="website-design-service.html" target="_blank" rel="noopener noreferrer">ğŸ’» Website Design</a> <a href="book-bricks.html" target="_blank" rel="noopener noreferrer">ğŸ§± Bricks Supply</a> <a href="book-halwai-service.html" target="_blank" rel="noopener noreferrer">ğŸ° Halwai Service</a> <a href="comingsoon.html" target="_blank" rel="noopener noreferrer">ğŸ½ï¸ Catering Service</a> <a href="book-barber-service.html" target="_blank" rel="noopener noreferrer">âœ‚ï¸ Barber Service</a> <a href="index.html" target="_blank" rel="noopener noreferrer">ğŸ’„ Ladies Corner</a> <a href="book-vehicle-service.html" target="_blank" rel="noopener noreferrer">ğŸš— Vehicle Service</a> <a href="automobile-repairing-services.html" target="_blank" rel="noopener noreferrer">ğŸ”§ Car Repair</a> <a href="book-parcel-delivery-service-services.html" target="_blank" rel="noopener noreferrer">ğŸ“¦ Parcel Delivery</a> <span style="color: #9ca3af;">ğŸ’° Loan Service (Coming Soon)</span> <!-- Duplicate for seamless loop --> <a href="book-ac-services.html" target="_blank" rel="noopener noreferrer">â„ï¸ AC Installation &amp; Repair</a> <a href="book-fridge-refrigrator-services.html" target="_blank" rel="noopener noreferrer">ğŸ§Š Refrigerator Repair</a> <a href="book-washing-machine-services.html" target="_blank" rel="noopener noreferrer">ğŸŒ€ Washing Machine Repair</a> <a href="book-tv-repair.html" target="_blank" rel="noopener noreferrer">ğŸ“º TV Repair</a> <a href="book-geyser-services.html" target="_blank" rel="noopener noreferrer">ğŸ”¥ Geyser Repair</a> <a href="electricianservice.html" target="_blank" rel="noopener noreferrer">âš¡ Electrician Service</a> <a href="book-ro-serrvice.html" target="_blank" rel="noopener noreferrer">ğŸ’§ RO Water Purifier</a> <a href="book-chimney-cleaning.html" target="_blank" rel="noopener noreferrer">ğŸ  Chimney Cleaning</a> <a href="book-safty-tank-service.html" target="_blank" rel="noopener noreferrer">ğŸš½ Septic Tank Cleaning</a> <a href="book-sewerage-unblock-service.html" target="_blank" rel="noopener noreferrer">ğŸ”§ Sewerage Unblocking</a> <a href="book-pasti-control-service.html" target="_blank" rel="noopener noreferrer">ğŸ› Pest Control Service</a> <a href="book-Sofa-cleaning.html" target="_blank" rel="noopener noreferrer">ğŸ›‹ï¸ Sofa Cleaning</a> <a href="watertankcleaning.html" target="_blank" rel="noopener noreferrer">ğŸª£ Water Tank Cleaning</a> <a href="book-wifi-service.html" target="_blank" rel="noopener noreferrer">ğŸ“¶ Wi-Fi Setup</a> <a href="Book-dth-installation-service.html" target="_blank" rel="noopener noreferrer">ğŸ“¡ DTH Installation</a> <a href="book-cctv-service.html" target="_blank" rel="noopener noreferrer">ğŸ“¹ CCTV Installation</a> <a href="book-borewell-service.html" target="_blank" rel="noopener noreferrer">ğŸ•³ï¸ Borewell Service</a> <a href="book-chinai-mistri.html" target="_blank" rel="noopener noreferrer">ğŸ§± Masonry Work</a> <a href="book-building-material-supply.html" target="_blank" rel="noopener noreferrer">ğŸ—ï¸ Building Material Supply</a> <a href="book-solar-installation.html" target="_blank" rel="noopener noreferrer">â˜€ï¸ Solar Panel Installation</a> <a href="book-ro-water-services-services.html" target="_blank" rel="noopener noreferrer">ğŸ’¦ RO Water Service</a> <a href="website-design-service.html" target="_blank" rel="noopener noreferrer">ğŸ’» Website Design</a> <a href="book-bricks.html" target="_blank" rel="noopener noreferrer">ğŸ§± Bricks Supply</a> <a href="book-halwai-service.html" target="_blank" rel="noopener noreferrer">ğŸ° Halwai Service</a> <a href="comingsoon.html" target="_blank" rel="noopener noreferrer">ğŸ½ï¸ Catering Service</a> <a href="book-barber-service.html" target="_blank" rel="noopener noreferrer">âœ‚ï¸ Barber Service</a> <a href="index.html" target="_blank" rel="noopener noreferrer">ğŸ’„ Ladies Corner</a> <a href="book-vehicle-service.html" target="_blank" rel="noopener noreferrer">ğŸš— Vehicle Service</a> <a href="automobile-repairing-services.html" target="_blank" rel="noopener noreferrer">ğŸ”§ Car Repair</a> <a href="book-parcel-delivery-service-services.html" target="_blank" rel="noopener noreferrer">ğŸ“¦ Parcel Delivery</a> <span style="color: #9ca3af;">ğŸ’° Loan Service (Coming Soon)</span>
       </div>
      </div>
     </div>
    </div>
    <div class="border-t border-gray-800 mt-8 pt-6 pb-2 text-center text-sm">
     <p>Â© 2024 Salon at Home / Ladies Corner in Sonipat. All rights reserved.</p>
    </div>
   </div>
  </footer>
  <div id="loading-overlay" class="loading-overlay hidden">
   <div class="animate-spin rounded-full h-12 w-12 border-b-4 border-blue-700 mb-4"></div>
   Processing your booking...
  </div>
  <script>
        // Configuration
        const defaultConfig = {
            company_name: "Salon at Home / Ladies Corner",
            customer_care: "8816014071",
            email_address: "care@sonipathomeservice.com",
            office_address: "128/1, Sainipura, Sonipat"
        };
        
        // --- Hierarchical Service Data Structure ---

        const categories = [
            // Note: In this file, categories array is used only for structure/style demonstration
            // The actual service logic is based on the flat 'services' array filtered by search input.
            { id: 'maruti', name: 'Maruti', icon: 'fas fa-car' },
            { id: 'tata', name: 'TATA', icon: 'fas fa-truck-pickup' },
            { id: 'hyundai', name: 'Hyundai', icon: 'fas fa-car' },
            { id: 'mahindra', name: 'Mahindra', icon: 'fas fa-truck' },
            { id: 'toyota', name: 'Toyota', icon: 'fas fa-van-shuttle' }
        ];

        const services = [
            // --- Maruti Cars (Bookable) ---
            { id: 'maruti-alto', name: 'Maruti Alto', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'Maruti', isBookable: true },
            { id: 'maruti-wagonr', name: 'Maruti WagonR', icon: 'ğŸš™', price: 2499, fullPrice: 4499, brand: 'Maruti', isBookable: true },
            { id: 'maruti-celerio', name: 'Maruti Celerio', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'Maruti', isBookable: true },
            { id: 'maruti-swift', name: 'Maruti Swift', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'Maruti', isBookable: true },
            { id: 'maruti-dzire', name: 'Maruti Dzire', icon: 'ğŸš™', price: 2499, fullPrice: 4499, brand: 'Maruti', isBookable: true },
            { id: 'maruti-baleno', name: 'Maruti Baleno', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'Maruti', isBookable: true },
            { id: 'maruti-ignis', name: 'Maruti Ignis', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'Maruti', isBookable: true },
            { id: 'maruti-astar', name: 'Maruti A-Star', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'Maruti', isBookable: true },
            { id: 'maruti-ritz', name: 'Maruti Ritz', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'Maruti', isBookable: true },
            { id: 'maruti-ciaz', name: 'Maruti Ciaz', icon: 'ğŸš™', price: 2499, fullPrice: 4499, brand: 'Maruti', isBookable: true },
            { id: 'maruti-eeco', name: 'Maruti Eeco', icon: 'ğŸš', price: 3499, fullPrice: 5499, brand: 'Maruti', isBookable: true },
            { id: 'maruti-ertiga', name: 'Maruti Ertiga', icon: 'ğŸš™', price: 2499, fullPrice: 4499, brand: 'Maruti', isBookable: true },
            { id: 'maruti-xl6', name: 'Maruti XL6', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'Maruti', isBookable: true },
            { id: 'maruti-brezza', name: 'Maruti Brezza', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'Maruti', isBookable: true },
            { id: 'maruti-grand-vitara', name: 'Maruti Grand Vitara', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'Maruti', isBookable: true },
            { id: 'maruti-scross', name: 'Maruti S-Cross', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'Maruti', isBookable: true },
            { id: 'maruti-sx4', name: 'Maruti SX4', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'Maruti', isBookable: true },
            { id: 'maruti-fronx', name: 'Maruti Fronx', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'Maruti', isBookable: true },
            // --- TATA Cars (Bookable) ---
            { id: 'tata-tiago', name: 'TATA Tiago', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'TATA', isBookable: true },
            { id: 'tata-altroz', name: 'TATA Altroz', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'TATA', isBookable: true },
            { id: 'tata-tigor', name: 'TATA Tigor', icon: 'ğŸš™', price: 2499, fullPrice: 4499, brand: 'TATA', isBookable: true },
            { id: 'tata-punch', name: 'TATA Punch', icon: 'ğŸš™', price: 2499, fullPrice: 4499, brand: 'TATA', isBookable: true },
            { id: 'tata-nexon', name: 'TATA Nexon', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'TATA', isBookable: true },
            { id: 'tata-harrier', name: 'TATA Harrier', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'TATA', isBookable: true },
            { id: 'tata-safari', name: 'TATA Safari', icon: 'ğŸš›', price: 3399, fullPrice: 5499, brand: 'TATA', isBookable: true },
            { id: 'tata-sumo', name: 'TATA Sumo', icon: 'ğŸš›', price: 3499, fullPrice: 5499, brand: 'TATA', isBookable: true },
            // --- Hyundai Cars (Bookable) ---
            { id: 'hyundai-alcazar', name: 'Hyundai Alcazar', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'Hyundai', isBookable: true },
            { id: 'hyundai-santro', name: 'Hyundai Santro', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'Hyundai', isBookable: true },
            { id: 'hyundai-aura', name: 'Hyundai Aura', icon: 'ğŸš™', price: 2499, fullPrice: 4499, brand: 'Hyundai', isBookable: true },
            { id: 'hyundai-creta', name: 'Hyundai Creta', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'Hyundai', isBookable: true },
            { id: 'hyundai-grand-i10-nios', name: 'Hyundai Grand i10 Nios', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'Hyundai', isBookable: true },
            { id: 'hyundai-i20', name: 'Hyundai i20', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'Hyundai', isBookable: true },
            { id: 'hyundai-venue', name: 'Hyundai Venue', icon: 'ğŸš™', price: 2499, fullPrice: 4499, brand: 'Hyundai', isBookable: true },
            { id: 'hyundai-verna', name: 'Hyundai Verna', icon: 'ğŸš™', price: 2499, fullPrice: 4499, brand: 'Hyundai', isBookable: true },
            { id: 'hyundai-xcent', name: 'Hyundai Xcent', icon: 'ğŸš™', price: 2499, fullPrice: 4499, brand: 'Hyundai', isBookable: true },
            { id: 'hyundai-i10', name: 'Hyundai i10', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'Hyundai', isBookable: true },
            { id: 'hyundai-eon', name: 'Hyundai Eon', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'Hyundai', isBookable: true },
            // --- Mahindra Cars (Bookable) ---
            { id: 'mahindra-bolero', name: 'Mahindra Bolero', icon: 'ğŸš›', price: 3399, fullPrice: 5499, brand: 'Mahindra', isBookable: true },
            { id: 'mahindra-scorpio-n', name: 'Mahindra Scorpio N', icon: 'ğŸš›', price: 3399, fullPrice: 5499, brand: 'Mahindra', isBookable: true },
            { id: 'mahindra-tuv300', name: 'Mahindra TUV300', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'Mahindra', isBookable: true },
            { id: 'mahindra-xuv500', name: 'Mahindra XUV500', icon: 'ğŸš›', price: 3399, fullPrice: 5499, brand: 'Mahindra', isBookable: true },
            { id: 'mahindra-xuv700', name: 'Mahindra XUV700', icon: 'ğŸš›', price: 3399, fullPrice: 5499, brand: 'Mahindra', isBookable: true },
            { id: 'mahindra-thar', name: 'Mahindra Thar', icon: 'ğŸš›', price: 3399, fullPrice: 5499, brand: 'Mahindra', isBookable: true },
            { id: 'mahindra-xuv300', name: 'Mahindra XUV300', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'Mahindra', isBookable: true },
            // --- Toyota Cars (Bookable) ---
            { id: 'toyota-etios', name: 'Toyota Etios', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'Toyota', isBookable: true },
            { id: 'toyota-glanza', name: 'Toyota Glanza', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'Toyota', isBookable: true },
            { id: 'toyota-innova', name: 'Toyota Innova', icon: 'ğŸš', price: 3499, fullPrice: 5499, brand: 'Toyota', isBookable: true },
            { id: 'toyota-fortuner', name: 'Toyota Fortuner', icon: 'ğŸš›', price: 3999, fullPrice: 5999, brand: 'Toyota', isBookable: true },
            // --- Non-Bookable Brands (Coming Soon) ---
            { id: 'honda-city', name: 'Honda City', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'Honda', isBookable: false },
            { id: 'honda-amaze', name: 'Honda Amaze', icon: 'ğŸš™', price: 2499, fullPrice: 4499, brand: 'Honda', isBookable: false },
            { id: 'honda-jazz', name: 'Honda Jazz', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'Honda', isBookable: false },
            { id: 'kia-seltose', name: 'Kia Seltose', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'Kia', isBookable: false },
            { id: 'kia-sonet', name: 'Kia Sonet', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'Kia', isBookable: false },
            { id: 'kia-carnival', name: 'Kia Carnival', icon: 'ğŸš', price: 3499, fullPrice: 5499, brand: 'Kia', isBookable: false },
            { id: 'skoda-rapid', name: 'Skoda Rapid', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'Skoda', isBookable: false },
            { id: 'skoda-slavia', name: 'Skoda Slavia', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'Skoda', isBookable: false },
            { id: 'skoda-kushaq', name: 'Skoda Kushaq', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'Skoda', isBookable: false },
            { id: 'vw-polo', name: 'VW Polo', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'Volkswagen', isBookable: false },
            { id: 'vw-vento', name: 'VW Vento', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'Volkswagen', isBookable: false },
            { id: 'vw-taigun', name: 'VW Taigun', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'Volkswagen', isBookable: false },
            { id: 'renault-kwid', name: 'Renault Kwid', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'Renault', isBookable: false },
            { id: 'renault-triber', name: 'Renault Triber', icon: 'ğŸš', price: 2999, fullPrice: 4999, brand: 'Renault', isBookable: false },
            { id: 'renault-kiger', name: 'Renault Kiger', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'Renault', isBookable: false },
            { id: 'nissan-magnite', name: 'Nissan Magnite', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'Nissan', isBookable: false },
            { id: 'nissan-micra', name: 'Nissan Micra', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'Nissan', isBookable: false },
            { id: 'mg-hector', name: 'MG Hector', icon: 'ğŸš›', price: 3399, fullPrice: 5499, brand: 'MG', isBookable: false },
            { id: 'mg-zs-ev', name: 'MG ZS EV', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'MG', isBookable: false },
            { id: 'ford-ecosport', name: 'Ford Ecosport', icon: 'ğŸš™', price: 2999, fullPrice: 4999, brand: 'Ford', isBookable: false },
            { id: 'ford-figo', name: 'Ford Figo', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'Ford', isBookable: false },
            { id: 'datsun-redigo', name: 'Datsun Redi-GO', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'Datsun', isBookable: false },
            { id: 'bmw-3-series', name: 'BMW 3 Series', icon: 'ğŸï¸', price: 4999, fullPrice: 7999, brand: 'BMW', isBookable: false },
            { id: 'bmw-x1', name: 'BMW X1', icon: 'ğŸï¸', price: 4999, fullPrice: 7999, brand: 'BMW', isBookable: false },
            { id: 'audi-a4', name: 'Audi A4', icon: 'ğŸï¸', price: 4999, fullPrice: 7999, brand: 'Audi', isBookable: false },
            { id: 'audi-q3', name: 'Audi Q3', icon: 'ğŸï¸', price: 4999, fullPrice: 7999, brand: 'Audi', isBookable: false },
            { id: 'merc-c-class', name: 'Mercedes C Class', icon: 'ğŸï¸', price: 5499, fullPrice: 8499, brand: 'Mercedes', isBookable: false },
            { id: 'volvo-xc60', name: 'Volvo XC60', icon: 'ğŸï¸', price: 4999, fullPrice: 7999, brand: 'Volvo', isBookable: false },
            { id: 'landrover-evoque', name: 'Range Rover Evoque', icon: 'ğŸï¸', price: 5999, fullPrice: 8999, brand: 'Land Rover', isBookable: false },
            { id: 'jeep-compass', name: 'Jeep Compass', icon: 'ğŸš›', price: 3999, fullPrice: 5999, brand: 'Jeep', isBookable: false },
            { id: 'citroen-c3', name: 'Citroen C3', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'Citroen', isBookable: false },
            { id: 'mitsubishi-pajero', name: 'Mitsubishi Pajero', icon: 'ğŸš›', price: 3999, fullPrice: 5999, brand: 'Mitsubishi', isBookable: false },
            { id: 'isuzu-d-max', name: 'Isuzu D-Max', icon: 'ğŸš›', price: 3999, fullPrice: 5999, brand: 'Isuzu', isBookable: false },
            { id: 'force-gurkha', name: 'Force Gurkha', icon: 'ğŸš›', price: 3499, fullPrice: 5499, brand: 'Force Motors', isBookable: false },
            { id: 'hm-ambassador', name: 'HM Ambassador', icon: 'ğŸš™', price: 3999, fullPrice: 5999, brand: 'Hindustan Motors', isBookable: false },
            { id: 'premier-padmini', name: 'Premier Padmini', icon: 'ğŸš—', price: 3999, fullPrice: 5999, brand: 'Premier', isBookable: false },
            { id: 'fiat-punto', name: 'Fiat Punto', icon: 'ğŸš—', price: 2499, fullPrice: 4499, brand: 'Fiat', isBookable: false },
        ];


        const halfServiceDetails = [
            "âœ“ Synthetic Engine Oil Change",
            "âœ“ Air Filter Change, Oil Filter Change", 
            "âœ“ Brake Oil Check/Top-up",
            "âœ“ Wiper Fluid/Shampoo Refill",
            "âœ“ Battery Acid Check",
            "âœ“ Spark Plug Clean/Check"
        ];
        
        const fullServiceDetails = [
            "âœ“ Synthetic Engine Oil Change",
            "âœ“ Air Filter Change, Oil Filter Change",
            "âœ“ Brake Oil Check/Top-up", 
            "âœ“ Wiper Fluid/Shampoo Refill",
            "âœ“ Battery Acid Check",
            "âœ“ Spark Plug Clean/Check",
            "âœ“ Gear Oil Change",
            "âœ“ Coolant Change",
            "âœ“ Brake Grease Change",
            "âœ“ Engine Flush Check/Change",
            "âœ“ Exterior Car Wash",
            "âœ“ AC Filter Change"
        ];

        let currentCarModel = null; 
        let cart = [];
        let selectedTimeSlot = '';
        let currentRecordCount = 0;

        // --- Element SDK Initialization ---
        async function initializeApp() {
            try {
                if (window.dataSdk) {
                    const dataHandler = { onDataChanged(data) { currentRecordCount = data.length; console.log(`Current record count: ${currentRecordCount}`); } };
                    await window.dataSdk.init(dataHandler);
                }
                
                if (window.elementSdk) {
                    window.elementSdk.init({
                        defaultConfig,
                        onConfigChange,
                        mapToCapabilities,
                        mapToEditPanelValues
                    });
                    console.log("Element SDK initialized successfully");
                }
            } catch (error) {
                console.error("Error initializing app:", error);
            }
        }
        
        function onConfigChange(config) {
             document.getElementById('company-name').textContent = config.company_name || defaultConfig.company_name;
             document.querySelector('h1 span').textContent = 'CarMechanic'; // Keep the static part
             document.querySelector('p.text-sm').textContent = config.tagline || defaultConfig.tagline;
             document.getElementById('services-title').textContent = config.services_title || defaultConfig.services_title;
             document.getElementById('footer-phone').textContent = config.contact_phone || defaultConfig.contact_phone;
             document.getElementById('footer-email').textContent = config.contact_email || defaultConfig.contact_email;
             document.getElementById('footer-address').textContent = config.footer_address || defaultConfig.footer_address;
             // Update header contact info
             const headerPhoneEl = document.querySelector('a[href^="tel:"]');
             if (headerPhoneEl) headerPhoneEl.textContent = 'ğŸ“ ' + (config.contact_phone || defaultConfig.contact_phone);
             document.getElementById('header-email-address').textContent = config.contact_email || defaultConfig.contact_email;
        }
        
        function mapToCapabilities(config) {
            return { recolorables: [], borderables: [], fontEditable: undefined, fontSizeable: undefined };
        }

        function mapToEditPanelValues(config) {
            return new Map([
                ["company_name", config.company_name || defaultConfig.company_name],
                ["tagline", config.tagline || defaultConfig.tagline],
                ["services_title", config.services_title || defaultConfig.services_title],
                ["contact_phone", config.contact_phone || defaultConfig.contact_phone],
                ["contact_email", config.contact_email || defaultConfig.contact_email],
                ["footer_address", config.footer_address || defaultConfig.footer_address]
            ]);
        }
        
        const dataHandler = {
            onDataChanged(data) {
                currentRecordCount = data.length;
                console.log(`Current record count: ${currentRecordCount}`);
            }
        };
        // --- End Element SDK Initialization ---


        // --- Helper Functions ---
        function hideMessages() {
            document.getElementById('success-message-ui').classList.add('hidden');
            document.getElementById('error-message-ui').classList.add('hidden');
        }
        
        function showMessage(type, messageHTML) {
            const successEl = document.getElementById('success-message-ui');
            const errorEl = document.getElementById('error-message-ui');
            hideMessages();
            
            if (type === 'success') {
                successEl.innerHTML = messageHTML;
                successEl.classList.remove('hidden');
            } else if (type === 'error') {
                errorEl.innerHTML = messageHTML;
                errorEl.classList.remove('hidden');
            }
            // Auto hide success after 8 seconds
            if (type === 'success') {
                setTimeout(() => {
                    successEl.classList.add('hidden');
                }, 8000);
            }
        }

        function showLoading() {
            document.getElementById('loading-overlay').classList.remove('hidden');
            document.getElementById('pay-now').disabled = true;
        }

        function hideLoading() {
            document.getElementById('loading-overlay').classList.add('hidden');
            document.getElementById('pay-now').disabled = false;
        }

        function liveSearch(searchTerm) {
            const resultsDiv = document.getElementById('live-search-results');
            const term = searchTerm.trim().toLowerCase();
            
            if (term.length < 2) {
                resultsDiv.innerHTML = '';
                return;
            }

            // Filter for bookable models only (Maruti, TATA, Hyundai, Mahindra, Toyota)
            const bookableBrands = ['Maruti', 'TATA', 'Hyundai', 'Mahindra', 'Toyota'];
            const searchResults = services.filter(service => 
                (service.name.toLowerCase().includes(term) || service.brand.toLowerCase().includes(term))
            ).slice(0, 5); 
            
            // Check if the search result is bookable
            const renderResults = searchResults.map(model => {
                const isBookable = model.isBookable && bookableBrands.includes(model.brand);
                const clickAction = isBookable 
                    ? `showServiceDetailPopup('${model.id}')` 
                    : `showMessage('error', 'âŒ ${model.name} à¤•à¥€ à¤¸à¤°à¥à¤µà¤¿à¤¸ à¤…à¤­à¥€ à¤¶à¥à¤°à¥‚ à¤¨à¤¹à¥€à¤‚ à¤¹à¥à¤ˆ à¤¹à¥ˆà¥¤ à¤œà¤²à¥à¤¦ à¤¹à¥€ à¤† à¤°à¤¹à¥€ à¤¹à¥ˆ!');`;
                const statusText = isBookable ? `â‚¹${model.price}+` : 'Coming Soon';
                const statusColor = isBookable ? 'text-red-600' : 'text-gray-500';
                
                return `
                    <div class="bg-blue-50 hover:bg-blue-100 p-2 rounded-lg cursor-pointer text-left" onclick="${clickAction}">
                        <span class="font-bold text-gray-800">${model.name}</span> 
                        <span class="text-sm text-blue-600 ml-2">(${model.brand})</span>
                        <span class="float-right font-bold ${statusColor}">${statusText}</span>
                    </div>
                `;
            }).join('');


            if (searchResults.length > 0) {
                 resultsDiv.innerHTML = renderResults;
            } else {
                 resultsDiv.innerHTML = `<p class="text-center text-gray-500 p-2 border border-gray-200 rounded-lg">No matching models found.</p>`;
            }
        }
        
        // --- Popups Handlers ---
        
        function showServiceDetailPopup(modelId) {
            const model = services.find(s => s.id === modelId);
            if (!model) return;

            // Check if the model is bookable
            const bookableBrands = ['Maruti', 'TATA', 'Hyundai', 'Mahindra', 'Toyota'];
            const isBookable = model.isBookable && bookableBrands.includes(model.brand);
            
            if (!isBookable) {
                showMessage('error', `âŒ ${model.name} à¤•à¥€ à¤¸à¤°à¥à¤µà¤¿à¤¸ à¤…à¤­à¥€ à¤¶à¥à¤°à¥‚ à¤¨à¤¹à¥€à¤‚ à¤¹à¥à¤ˆ à¤¹à¥ˆà¥¤ à¤œà¤²à¥à¤¦ à¤¹à¥€ à¤† à¤°à¤¹à¥€ à¤¹à¥ˆ!`);
                return;
            }

            currentCarModel = model;

            document.getElementById('detail-popup-title').textContent = `${model.name} - Service Packages`;
            const detailedServiceList = document.getElementById('detailed-service-list');
            
            detailedServiceList.innerHTML = `
                <!-- Half Service Card -->
                <div class="service-detail-popup-item flex flex-col md:flex-row justify-between items-start md:items-center p-4 rounded-xl border border-green-300">
                    <div class="flex-1 mr-4 mb-4 md:mb-0">
                        <h5 class="font-bold text-xl text-green-700">Half Service (â‚¹${model.price})</h5>
                        <p class="text-gray-600 text-sm mt-2">Recommended for mid-interval maintenance.</p>
                        <ul class="text-gray-600 text-xs mt-2 list-disc ml-4 space-y-1">
                             <li>${halfServiceDetails.slice(0, 3).join('</li><li>')}</li>
                             <li>... and more checks.</li>
                        </ul>
                        <p class="text-red-500 text-xs mt-2 font-semibold">Labour only. Parts/Oil charges extra. Free Pickup/Drop.</p>
                    </div>
                    <div class="text-right flex flex-col items-end space-y-2">
                        <span class="font-extrabold text-2xl text-red-600">â‚¹${model.price}</span>
                        <button onclick="addToCartAndCheckout('${model.id}', 'half');" class="btn-primary text-white px-4 py-2 rounded-full font-semibold text-sm transition-all duration-300 transform hover:scale-105" style="background: #27ae60;">
                            Book Half Service
                        </button>
                    </div>
                </div>
                
                <!-- Full Service Card -->
                <div class="service-detail-popup-item flex flex-col md:flex-row justify-between items-start md:items-center p-4 rounded-xl border border-blue-300">
                    <div class="flex-1 mr-4 mb-4 md:mb-0">
                        <h5 class="font-bold text-xl text-blue-700">Full Service (â‚¹${model.fullPrice})</h5>
                        <p class="text-gray-600 text-sm mt-2">Complete annual maintenance and fluid change.</p>
                        <ul class="text-gray-600 text-xs mt-2 list-disc ml-4 space-y-1">
                             <li>${fullServiceDetails.slice(0, 3).join('</li><li>')}</li>
                             <li>... and many more checks.</li>
                        </ul>
                        <p class="text-red-500 text-xs mt-2 font-semibold">Labour only. Parts/Oil charges extra. Free Pickup/Drop.</p>
                    </div>
                    <div class="text-right flex flex-col items-end space-y-2">
                        <span class="font-extrabold text-2xl text-red-600">â‚¹${model.fullPrice}</span>
                        <button onclick="addToCartAndCheckout('${model.id}', 'full');" class="btn-primary text-white px-4 py-2 rounded-full font-semibold text-sm transition-all duration-300 transform hover:scale-105">
                            Book Full Service
                        </button>
                    </div>
                </div>
            `;

            document.getElementById('service-detail-popup').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            
            // Hide live search results when showing popup
            document.getElementById('live-search-results').innerHTML = '';
            document.getElementById('search-input').value = '';
        }

        
        function hideServiceDetailPopup() {
            document.getElementById('service-detail-popup').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }
        
        function showCheckoutPopup() {
            if (cart.length === 0 || !currentCarModel) return;
            
            hideServiceDetailPopup(); 
            
            document.getElementById('checkout-popup').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            updateCartUI();
            
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('preferred-date').setAttribute('min', today);
            
            // Set service title in checkout modal
            document.getElementById('modal-service-title').textContent = `Book: ${cart[0].name}`;
            
            hideMessages();
            
            // Reset time slots UI on open
            document.querySelectorAll('.time-slot').forEach(s => s.classList.remove('selected'));
            selectedTimeSlot = '';
            document.getElementById('preferred-time').value = '';
        }

        function hideCheckoutPopup() {
            document.getElementById('checkout-popup').classList.add('hidden');
            document.body.style.overflow = 'auto';
            // Clear form and messages on close
            document.getElementById('checkout-form').reset();
            hideMessages();
            // Reset time slot selection
            document.querySelectorAll('.time-slot').forEach(s => s.classList.remove('selected'));
            selectedTimeSlot = '';
            document.getElementById('preferred-date').value = '';

            // Clear selected items/cart to ensure new booking starts clean
            cart = [];
            currentCarModel = null;
            updateCartUI();
        }
        
        function addToCartAndCheckout(modelId, serviceType) {
            const model = services.find(s => s.id === modelId);
            if (!model) return;

            const price = serviceType === 'half' ? model.price : model.fullPrice;
            const displayName = `${model.name} - ${serviceType === 'half' ? 'Half' : 'Full'} Service`;
            
            currentCarModel = model; 
            
            // Set cart to the single selected item
            cart = [{
                id: model.id,
                name: displayName,
                price: price,
                quantity: 1
            }];
            
            updateCartUI();
            showCheckoutPopup(); 
        }
        
        // --- Cart & UI Logic ---

        function showCart() {
            if (cart.length > 0) {
                // If cart has items, jump straight to checkout as it's a single item booking system
                showCheckoutPopup(); 
            } else {
                 showMessage('error', 'âŒ à¤†à¤ªà¤•à¤¾ à¤•à¤¾à¤°à¥à¤Ÿ à¤–à¤¾à¤²à¥€ à¤¹à¥ˆà¥¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤ªà¤¹à¤²à¥‡ à¤¸à¤°à¥à¤µà¤¿à¤¸ à¤šà¥à¤¨à¥‡à¤‚à¥¤');
            }
        }
        
        function updateCartUI() {
            const cartCount = document.getElementById('cart-count');
            const onsiteBalance = document.getElementById('checkout-onsite-balance');
            
            const totalItems = cart.length;
            const totalAmount = cart.length > 0 ? cart[0].price : 0;
            
            // Fixed booking charge of 99 INR, but never more than the total amount
            const bookingCharge = totalAmount < 99 ? totalAmount : 99; 
            const onsiteAmount = Math.max(0, totalAmount - bookingCharge);
            
            if (totalItems > 0) {
                cartCount.textContent = totalItems;
                cartCount.classList.remove('hidden');
            } else {
                cartCount.classList.add('hidden');
            }
            
            // Update all total/price displays
            const elementsToUpdate = {
                'checkout-total': totalAmount,
                'checkout-booking-charge': bookingCharge,
                'checkout-onsite-balance': onsiteAmount,
                'checkout-pay-now': bookingCharge,
                'note-booking-charge': bookingCharge
            };
            
            for (const id in elementsToUpdate) {
                const el = document.getElementById(id);
                if (el) el.textContent = elementsToUpdate[id];
            }
            
            const payText = `Pay â‚¹${bookingCharge} Booking Charge`;
            const payNowBtn = document.getElementById('pay-now');
            if (payNowBtn) payNowBtn.innerHTML = `<span id="checkout-button-text">${payText}</span>`;
            
            if (onsiteBalance) onsiteBalance.textContent = onsiteAmount;
        }
        
        // --- End Cart & UI Logic ---


        function validateFormData(formData) {
            const errors = [];
            
            if (!formData.customerName || formData.customerName.length < 2) {
                errors.push('à¤•à¥ƒà¤ªà¤¯à¤¾ à¤µà¥ˆà¤§ à¤¨à¤¾à¤® à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚ (à¤•à¤® à¤¸à¥‡ à¤•à¤® 2 à¤…à¤•à¥à¤·à¤°)');
            }
            
            if (!/^[0-9]{10}$/.test(formData.mobile)) {
                errors.push(' à¤•à¥ƒà¤ªà¤¯à¤¾ à¤µà¥ˆà¤§ 10 à¤…à¤‚à¤•à¥‹à¤‚ à¤•à¤¾ à¤®à¥‹à¤¬à¤¾à¤‡à¤² à¤¨à¤‚à¤¬à¤° à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚');
            }
            
            if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(formData.email)) {
                errors.push(' à¤•à¥ƒà¤ªà¤¯à¤¾ à¤µà¥ˆà¤§ à¤ˆà¤®à¥‡à¤² à¤ªà¤¤à¤¾ à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚');
            }
            
            if (!formData.address || formData.address.length < 10) {
                errors.push(' à¤•à¥ƒà¤ªà¤¯à¤¾ à¤ªà¥‚à¤°à¤¾ à¤ªà¤¤à¤¾ à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚ (à¤•à¤® à¤¸à¥‡ à¤•à¤® 10 à¤…à¤•à¥à¤·à¤°)');
            }
            
            if (!/^[0-9]{6}$/.test(formData.pincode)) {
                errors.push('à¤•à¥ƒà¤ªà¤¯à¤¾ à¤µà¥ˆà¤§ 6 à¤…à¤‚à¤•à¥‹à¤‚ à¤•à¤¾ à¤ªà¤¿à¤¨à¤•à¥‹à¤¡ à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚');
            }
            
            if (!formData.preferredDate) {
                errors.push('à¤•à¥ƒà¤ªà¤¯à¤¾ à¤ªà¤¸à¤‚à¤¦à¥€à¤¦à¤¾ à¤¤à¤¾à¤°à¥€à¤– à¤šà¥à¤¨à¥‡à¤‚');
            }
            
            if (!formData.preferredTime) {
                errors.push('à¤•à¥ƒà¤ªà¤¯à¤¾ à¤ªà¤¸à¤‚à¤¦à¥€à¤¦à¤¾ à¤¸à¤®à¤¯ à¤šà¥à¤¨à¥‡à¤‚');
            }
            
            return errors;
        }


        // Razorpay payment integration
        function initiatePayment(customerData) {
            const totalAmount = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const bookingCharge = totalAmount < 99 ? totalAmount : 99;
            
            // Check record limit
            if (currentRecordCount >= 999) {
                showMessage('error', 'âš ï¸ à¤…à¤§à¤¿à¤•à¤¤à¤® 999 à¤¬à¥à¤•à¤¿à¤‚à¤— à¤•à¥€ à¤¸à¥€à¤®à¤¾ à¤ªà¤¹à¥à¤à¤š à¤—à¤ˆ à¤¹à¥ˆà¥¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤•à¤¸à¥à¤Ÿà¤®à¤° à¤•à¥‡à¤¯à¤° à¤¸à¥‡ à¤¸à¤‚à¤ªà¤°à¥à¤• à¤•à¤°à¥‡à¤‚: 8816014071à¥¤');
                return;
            }

            if (typeof Razorpay === 'undefined') {
                showMessage('error', 'âŒ à¤ªà¥‡à¤®à¥‡à¤‚à¤Ÿ à¤—à¥‡à¤Ÿà¤µà¥‡ à¤²à¥‹à¤¡ à¤¨à¤¹à¥€à¤‚ à¤¹à¥à¤†à¥¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤ªà¥‡à¤œ à¤•à¥‹ à¤°à¥€à¤«à¤¼à¥à¤°à¥‡à¤¶ à¤•à¤°à¤•à¥‡ à¤ªà¥à¤¨à¤ƒ à¤ªà¥à¤°à¤¯à¤¾à¤¸ à¤•à¤°à¥‡à¤‚à¥¤');
                return;
            }
            
            const options = {
                key: 'rzp_live_RLjzp7VlXERwiG', // Live Razorpay key
                amount: bookingCharge * 100, // Amount in paise
                currency: 'INR',
                name: 'Salon at Home / Ladies Corner',
                description: 'Booking Charge - Professional Beauty Service',
                image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiByeD0iMTIiIGZpbGw9IiMwZjYyZmUiLz4KPHN2ZyB4PSIxNiIgeT0iMTYiIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGQ9Ik0xOC4zNiA1LjY0Yy0xLjk1LTEuOTYtNS4xMS0xLjk2LTcuMDcgMEw5IDcuOTNsLTIuMjktMi4yOWMtMS45NS0xLjk2LTUuMTEtMS45Ni03LjA3IDBzLTEuOTYgNS4xMSAwIDcuMDdMMTIgMjQuOTNsMTIuMzYtMTIuMjJjMS45Ni0xLjk2IDEuOTYtNS4xMSAwLTcuMDd6Ii8+Cjwvc3ZnPgo8L3N2Zz4K',
                prefill: {
                    name: customerData.customerName,
                    email: customerData.email,
                    contact: customerData.mobile
                },
                theme: {
                    color: '#0f62fe'
                },
                handler: function(response) {
                    submitToGoogleSheets(customerData, response.razorpay_payment_id);
                },
                modal: {
                    ondismiss: function() {
                        hideLoading();
                        showMessage('error', 'âŒ à¤ªà¥‡à¤®à¥‡à¤‚à¤Ÿ à¤•à¥ˆà¤‚à¤¸à¤¿à¤² à¤•à¤° à¤¦à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾ à¤¹à¥ˆà¥¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤¬à¥à¤•à¤¿à¤‚à¤— à¤ªà¥‚à¤°à¥€ à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤¦à¥‹à¤¬à¤¾à¤°à¤¾ à¤ªà¥à¤°à¤¯à¤¾à¤¸ à¤•à¤°à¥‡à¤‚à¥¤');
                    }
                }
            };
            
            try {
                showLoading();
                const rzp = new Razorpay(options);
                rzp.on('payment.failed', function (response) {
                    hideLoading();
                    const errorMsg = response.error.description || 'Unknown payment error';
                    showMessage('error', `âŒ à¤ªà¥‡à¤®à¥‡à¤‚à¤Ÿ à¤µà¤¿à¤«à¤²: ${errorMsg}<br><br>à¤•à¥ƒà¤ªà¤¯à¤¾ à¤¦à¥‹à¤¬à¤¾à¤°à¤¾ à¤ªà¥à¤°à¤¯à¤¾à¤¸ à¤•à¤°à¥‡à¤‚ à¤¯à¤¾ à¤•à¤¸à¥à¤Ÿà¤®à¤° à¤•à¥‡à¤¯à¤° à¤¸à¥‡ à¤¸à¤‚à¤ªà¤°à¥à¤• à¤•à¤°à¥‡à¤‚: 8816014071à¥¤`);
                });
                rzp.open();
                
            } catch (error) {
                hideLoading();
                console.error('âŒ Razorpay initialization error:', error);
                showMessage('error', 'âŒ à¤ªà¥‡à¤®à¥‡à¤‚à¤Ÿ à¤—à¥‡à¤Ÿà¤µà¥‡ à¤à¤°à¤°à¥¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤ªà¥‡à¤œ à¤•à¥‹ à¤°à¥€à¤«à¤¼à¥à¤°à¥‡à¤¶ à¤•à¤°à¤•à¥‡ à¤ªà¥à¤¨à¤ƒ à¤ªà¥à¤°à¤¯à¤¾à¤¸ à¤•à¤°à¥‡à¤‚à¥¤');
            }
        }

        // Google Sheets integration and Data SDK save
        async function submitToGoogleSheets(customerData, paymentId) {
            const totalAmount = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const bookingCharge = totalAmount < 99 ? totalAmount : 99;
            const onsiteBalance = Math.max(0, totalAmount - bookingCharge);
            const orderItems = cart.map(item => `${item.name} (Qty: ${item.quantity}, Price: â‚¹${item.price})`).join(' | ');

            const sheetData = {
                timestamp: new Date().toLocaleString('en-IN', { timeZone: 'Asia/Kolkata' }),
                customerName: customerData.customerName,
                mobile: customerData.mobile,
                email: customerData.email,
                address: customerData.address,
                landmark: customerData.landmark || 'Not provided',
                pincode: customerData.pincode,
                preferredDate: customerData.preferredDate,
                preferredTime: customerData.preferredTime,
                orderItems: orderItems,
                totalAmount: totalAmount,
                paidAmount: bookingCharge,
                onsiteBalance: onsiteBalance,
                paymentId: paymentId,
                status: onsiteBalance > 0 ? 'Advance Paid - Onsite Balance Pending' : 'Payment Complete'
            };

            const params = new URLSearchParams(sheetData);
            let sheetSaveSuccess = false;

            try {
                // Using the same App Script URL structure as the original AC file
                const response = await fetch('https://script.google.com/macros/s/AKfycbwR2uJ2Uslimb7A04lHdd9JwKdk-d02iqVO-PAht9CRUw9rRcusnGAdAjCT07SjZHiO/exec', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: params.toString()
                });
                if (response.ok || response.status === 200) {
                     console.log('âœ… Data sent to Google Sheet successfully');
                     sheetSaveSuccess = true;
                } else {
                     console.log('âš ï¸ Google Sheet POST failed, response status:', response.status);
                }
            } catch (error1) {
                console.log('âš ï¸ Google Sheet method failed', error1);
            }

            // Also save to Data SDK for backup
            if (window.dataSdk) {
                try {
                    const result = await window.dataSdk.create(sheetData);
                    if (result.isOk) {
                        console.log('âœ… Data also saved to Canva Sheet as backup');
                    }
                } catch (sdkError) {
                    console.error('âŒ Data SDK save error:', sdkError);
                }
            }
            
            hideLoading();
            hideCheckoutPopup();

            // Show success message
            const sheetStatusMsg = sheetSaveSuccess ? 
                "âœ… à¤†à¤ªà¤•à¥€ à¤¬à¥à¤•à¤¿à¤‚à¤— à¤¸à¤«à¤²à¤¤à¤¾à¤ªà¥‚à¤°à¥à¤µà¤• à¤¸à¥‡à¤µ à¤¹à¥‹ à¤—à¤ˆ à¤¹à¥ˆ!" : 
                "âš ï¸ à¤¬à¥à¤•à¤¿à¤‚à¤— à¤²à¥‹à¤•à¤²à¥€ à¤¸à¥‡à¤µ à¤¹à¥‹ à¤—à¤ˆ à¤¹à¥ˆà¥¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤ªà¥‡à¤®à¥‡à¤‚à¤Ÿ ID à¤•à¤¸à¥à¤Ÿà¤®à¤° à¤•à¥‡à¤¯à¤° à¤•à¥‹ à¤¸à¤¾à¤à¤¾ à¤•à¤°à¥‡à¤‚à¥¤";

            const successMessage = `
                <div style="text-align: center;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px;">ğŸ‰ à¤¬à¥à¤•à¤¿à¤‚à¤— à¤¸à¤«à¤²!</div>
                    <div style="margin-bottom: 10px;"><strong>à¤•à¥à¤² à¤¸à¤°à¥à¤µà¤¿à¤¸ à¤°à¤¾à¤¶à¤¿:</strong> â‚¹${totalAmount}</div>
                    <div style="margin-bottom: 10px;"><strong>à¤à¤¡à¤µà¤¾à¤‚à¤¸ à¤­à¥à¤—à¤¤à¤¾à¤¨:</strong> â‚¹${bookingCharge}</div>
                    <div style="margin-bottom: 10px; color: #10b981; font-weight: bold;"><strong>à¤¬à¤•à¤¾à¤¯à¤¾ à¤°à¤¾à¤¶à¤¿:</strong> â‚¹${onsiteBalance} (à¤®à¥Œà¤•à¥‡ à¤ªà¤° à¤­à¥à¤—à¤¤à¤¾à¤¨ à¤•à¤°à¥‡à¤‚)</div>
                    <div style="margin-bottom: 10px;"><strong>à¤ªà¥‡à¤®à¥‡à¤‚à¤Ÿ ID:</strong> ${paymentId}</div>
                    <div style="margin-bottom: 10px;"><strong>à¤ªà¤¸à¤‚à¤¦à¥€à¤¦à¤¾ à¤¤à¤¾à¤°à¥€à¤–:</strong> ${customerData.preferredDate}</div>
                    <div style="margin-bottom: 15px;"><strong>à¤ªà¤¸à¤‚à¤¦à¥€à¤¦à¤¾ à¤¸à¤®à¤¯:</strong> ${customerData.preferredTime}</div>
                    <div style="background: rgba(14, 165, 233, 0.1); padding: 10px; border-radius: 8px; margin-top: 15px;">
                        <strong>${sheetStatusMsg}</strong><br>
                        à¤¹à¤®à¤¾à¤°à¥€ à¤Ÿà¥€à¤® à¤œà¤²à¥à¤¦ à¤¹à¥€ à¤†à¤ªà¤¸à¥‡ à¤¸à¤‚à¤ªà¤°à¥à¤• à¤•à¤°à¤•à¥‡ à¤¸à¤®à¤¯ à¤•à¥€ à¤ªà¥à¤·à¥à¤Ÿà¤¿ à¤•à¤°à¥‡à¤—à¥€à¥¤<br>
                        <strong>à¤¬à¤¾à¤•à¥€ â‚¹${onsiteBalance} à¤¬à¥à¤¯à¥‚à¤Ÿà¥€à¤¶à¤¿à¤¯à¤¨ à¤•à¥‡ à¤†à¤¨à¥‡ à¤ªà¤° à¤¦à¥‡à¤‚à¥¤</strong>
                    </div>
                </div>
            `;
            
            showMessage('success', successMessage);

            // Clear cart 
            cart = [];
            updateCartUI();
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Note: renderServices() call removed as services are loaded via search/popups
            updateCartUI();

            // Set minimum date to today
            const today = new Date().toISOString().split('T')[0];
            const preferredDateInput = document.getElementById('preferred-date');
            if (preferredDateInput) {
                preferredDateInput.setAttribute('min', today);
            }

            // Time slot selection
            document.querySelectorAll('.time-slot').forEach(slot => {
                slot.addEventListener('click', function() {
                    document.querySelectorAll('.time-slot').forEach(s => s.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedTimeSlot = this.dataset.time;
                    document.getElementById('preferred-time').value = selectedTimeSlot;
                });
            });


            // Cart button (now acts as a direct checkout button if cart has items)
            document.getElementById('cart-btn').addEventListener('click', showCart);
            
            // Close buttons
            document.getElementById('close-detail-popup').addEventListener('click', hideServiceDetailPopup);
            
            document.getElementById('close-checkout').addEventListener('click', hideCheckoutPopup);
            
            // Checkout form submission
            document.getElementById('checkout-form').addEventListener('submit', function(e) {
                e.preventDefault();
                hideMessages(); // Clear old error messages
                
                const formData = {
                    customerName: document.getElementById('customer-name').value.trim(),
                    mobile: document.getElementById('mobile-number').value.trim(),
                    email: document.getElementById('email-id').value.trim(),
                    address: document.getElementById('full-address').value.trim(),
                    landmark: document.getElementById('landmark').value.trim(),
                    pincode: document.getElementById('pincode').value.trim(),
                    preferredDate: document.getElementById('preferred-date').value,
                    preferredTime: selectedTimeSlot
                };
                
                // Validate form data
                const validationErrors = validateFormData(formData);
                if (validationErrors.length > 0) {
                    showMessage('error', 'âŒ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤¨à¤¿à¤®à¥à¤¨à¤²à¤¿à¤–à¤¿à¤¤ à¤¤à¥à¤°à¥à¤Ÿà¤¿à¤¯à¤¾à¤ à¤ à¥€à¤• à¤•à¤°à¥‡à¤‚:<br>' + validationErrors.join('<br>'));
                    return;
                }
                
                // Initiate Payment
                initiatePayment(formData);
            });

            // Close popups when clicking outside
            
            document.getElementById('checkout-popup').addEventListener('click', function(e) {
                if (e.target === this) hideCheckoutPopup();
            });
            
            // Initialize SDKs
            initializeApp();
        });

    </script>
 </body>

</html>
