<!doctype html>
<html lang="hi">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/svg+xml" href="logo.png">
  <title>Car Booking For Travel in Sonipat - Professional Taxi &amp; Cab Service</title>
  <!-- SEO Meta Tags -->
    <meta name="description" content="Get professional car booking and taxi services in Sonipat. Outstation, local, and airport transfers with clean vehicles and professional drivers. Book now!" />
    <meta name="keywords" content="car booking sonipat, taxi service sonipat, cab service sonipat, outstation taxi sonipat, tempo traveller sonipat, car rental sonipat, 24x7 taxi sonipat, luxury car booking sonipat, travel agency sonipat, home services in Sonipat" />
    <meta name="author" content="Sonipat Home Service" />
    <link rel="canonical" href="https://sonipathomeservice.com/book-vehicle-service.html" />
    <meta name="robots" content="index, follow" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://sonipathomeservice.com/book-vehicle-service.html" />
    <meta property="og:title" content="Car Booking For Travel - Sonipat Home Service" />
    <meta property="og:description" content="Professional car booking and taxi service in Sonipat with experienced drivers. Clean vehicles and GPS tracking." />
    <meta property="og:image" content="logo.png" />
    <meta property="og:site_name" content="Sonipat Home Service" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://sonipathomeservice.com/book-vehicle-service.html" />
    <meta property="twitter:title" content="Car Booking For Travel - Sonipat Home Service" />
    <meta property="twitter:description" content="Professional car booking and taxi service in Sonipat with experienced drivers. Clean vehicles and GPS tracking." />
    <meta property="twitter:image" content="logo.png" />
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
        body {
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Subtle light background */
            margin-top: 0 !important;
            padding-top: 0 !important;
        }
        
        /* --- Gradient Colors for Header and Primary Buttons (Deep Blue/Indigo) --- */
        .gradient-bg {
            background: linear-gradient(135deg, #0f62fe 0%, #1e40af 100%); 
        }

        header {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
        }
        
        /* --- Service Card (Ultra Stylish - AC Style) --- */
        .service-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 3px solid transparent;
            transform-style: preserve-3d;
            background: #ffffff;
            box-shadow: 
                0 15px 30px rgba(0,0,0,0.1),
                0 5px 15px rgba(0,0,0,0.05);
            border-radius: 20px; 
            position: relative;
            overflow: hidden;
            margin: 8px;
            cursor: pointer; /* Added cursor pointer */
        }
        
        .service-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(15,98,254,0.1) 0%, rgba(30,64,175,0.1) 100%);
            opacity: 0;
            transition: opacity 0.4s ease;
            z-index: 1;
        }
        
        .service-card:hover::before {
            opacity: 1;
        }
        
        .service-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 
                0 25px 50px rgba(15,98,254,0.3), 
                0 15px 30px rgba(0,0,0,0.15),
                inset 0 2px 0 rgba(255,255,255,0.9);
            border-color: #0f62fe; /* Primary color border on hover */
        }
        
        .service-card-content {
            position: relative;
            z-index: 2;
            padding: 24px;
        }
        
        .icon-hover {
            transition: all 0.3s ease;
        }
        
        .service-card:hover .icon-hover {
            transform: scale(1.15) rotate(-5deg); 
        }
        
        /* --- Primary Button (Ultra Stylish - AC Style) --- */
        .btn-primary {
            background: linear-gradient(135deg, #0f62fe, #1e40af);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(15,98,254,0.4);
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #1e40af, #11368e);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(15,98,254,0.6);
        }
        
        /* --- Utility classes for Modals and Loading --- */
        .popup-overlay {
            backdrop-filter: blur(10px);
            animation: fadeIn 0.3s ease;
        }
        
        .popup-content {
            animation: slideUp 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .cart-badge {
            animation: bounce 0.5s ease;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        .service-icon {
            width: 48px;
            height: 48px;
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(5px);
            z-index: 9000;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            color: #0f62fe;
            font-size: 1.2rem;
            font-weight: bold;
        }

        /* --- Marquee/Slider Styling (for Footer - AC Style) --- */
        .services-slider {
            overflow: hidden;
            white-space: nowrap;
            padding: 10px 0;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
            background: #374151;
        }

        .services-track {
            display: inline-block;
            animation: marquee 30s linear infinite;
        }

        .services-track a, .services-track span {
            display: inline-block;
            color: #d1d5db; /* light gray */
            padding: 0 15px;
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            transition: color 0.3s;
        }

        .services-track a:hover {
            color: #60a5fa; /* blue-400 */
        }

        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        
        /* Vehicle Specific Styles */
        .vehicle-image {
            width: 100%;
            height: 120px;
            margin-bottom: 15px;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            background: #e0f2fe; /* Light blue background for SVG */
            border: 2px solid rgba(15, 98, 254, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .vehicle-svg {
            width: 90%;
            height: 90%;
            object-fit: contain;
        }

        .km-calculator-card {
            background: #f0f9ff;
            border: 1px solid #bfdbfe;
            border-radius: 12px;
            padding: 16px;
            margin-top: 15px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
        }

        .km-input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            margin-top: 5px;
            box-sizing: border-box;
            transition: border-color 0.3s;
        }

        .km-input:focus {
             border-color: #3b82f6;
             outline: none;
        }

        .price-breakdown-box {
            background: #e0f2fe;
            border: 1px solid #93c5fd;
            border-radius: 8px;
            padding: 10px;
            margin-top: 10px;
            font-size: 0.9rem;
            line-height: 1.5;
            color: #1e40af;
        }
        
        .night-charge-checkbox {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
            padding: 10px;
            background: #f0f9ff;
            border-radius: 8px;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="min-h-full bg-gray-50"><!-- Header (AC Style) -->
  <header class="gradient-bg text-white shadow-2xl sticky top-0 z-40">
   <div class="container mx-auto px-4 py-4">
    <div class="flex justify-between items-center"><a href="index.html" class="flex items-center space-x-3 hover:opacity-90 transition-opacity"><img src="logo.png" alt="Sonipat Home Service Logo" class="h-10 w-10 sm:h-12 sm:w-12 rounded-full shadow-lg border border-white/50">
      <div>
       <h1 id="company-name" class="text-xl sm:text-2xl font-extrabold tracking-tight"> <span class="text-yellow-300">CarBooking</span></h1>
       <p class="text-sm font-semibold opacity-90">Professional Taxi & Cab Service</p>
      </div></a>
     <div class="flex items-center space-x-4">
      <!-- Desktop Contact Side Bar -->
      <div class="text-right hidden md:block border-l pl-4 border-white/30">
       <a href="tel:8816014071" class="text-lg font-bold hover:text-yellow-300 transition-colors">üìû 8816014071</a>
       <p id="email-address" class="text-xs opacity-80 mt-1">care@sonipathomeservice.com</p>
      </div>
      <!-- Cart Button with Pop -->
      <button id="cart-btn" class="relative bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-md"> <span class="flex items-center space-x-2">
        <i class="fas fa-shopping-cart w-5 h-5"></i>
        <span class="hidden sm:inline">Cart</span> <span id="cart-count" class="bg-red-500 text-white rounded-full px-2 py-0.5 text-xs hidden font-bold">0</span> </span> </button>
     </div>
    </div>
   </div>
  </header><!-- NEW: Info Cards Section (AC Style) -->
  <section class="py-6 bg-white">
   <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
     <!-- Info Card 1: Expert Drivers -->
     <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
      <div class="flex items-center space-x-3"><span class="text-3xl text-blue-600"><i class="fas fa-user-shield"></i></span>
       <div>
        <h4 class="font-extrabold text-lg text-gray-800">Verified & Expert Drivers</h4>
        <p class="text-sm text-gray-600">Background checked and highly experienced drivers.</p>
       </div>
      </div>
     </div>
     <!-- Info Card 2: Clean Vehicles -->
     <div class="bg-green-50 border-l-4 border-green-500 p-4 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
      <div class="flex items-center space-x-3"><span class="text-3xl text-green-600"><i class="fas fa-car-wash"></i></span>
       <div>
        <h4 class="font-extrabold text-lg text-gray-800">Clean & Maintained Fleet</h4>
        <p class="text-sm text-gray-600">GPS enabled, neat and comfortable vehicles.</p>
       </div>
      </div>
     </div>
     <!-- Info Card 3: 24/7 Support -->
     <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
      <div class="flex items-center space-x-3"><span class="text-3xl text-yellow-600"><i class="fas fa-headset"></i></span>
       <div>
        <h4 class="font-extrabold text-lg text-gray-800">24/7 Booking & Support</h4>
        <p class="text-sm text-gray-600">Available for local, outstation, and emergency travel.</p>
       </div>
      </div>
     </div>
    </div>
   </div>
  </section><!-- Services Section (AC Style Cards) -->
  <section class="py-12 bg-white">
   <div class="container mx-auto px-4">
    <h3 class="text-3xl font-extrabold text-center mb-10 text-gray-800">Choose Your Vehicle & Book Now</h3>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 px-2" id="services-grid"><!-- Vehicle Services will be populated by JavaScript -->
    </div>
    <div class="max-w-4xl mx-auto mt-10 p-6 bg-yellow-100 rounded-xl shadow-lg border border-yellow-300 text-center">
     <div class="text-2xl font-bold text-red-600 mb-4">
      ‚ö†Ô∏è ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∏‡•Ç‡§ö‡§®‡§æ (Important Notice)
     </div>
     <p class="text-gray-700 font-semibold text-lg">
      ‡§Ø‡§π ‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§∏‡•á‡§µ‡§æ ‡§ï‡•á‡§µ‡§≤ ‡§Ü‡§â‡§ü‡§∏‡•ç‡§ü‡•á‡§∂‡§®/‡§≤‡§Æ‡•ç‡§¨‡•Ä ‡§¶‡•Ç‡§∞‡•Ä ‡§ï‡•Ä ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§π‡•à‡•§
     </p>
     <p class="text-gray-600 text-sm mt-2">
      (This booking is for outstation/long-distance travel only. Prices exclude Toll, Parking, and State Taxes.)
     </p>
     <p class="text-blue-600 font-bold mt-4">
      ‡§ü‡•ã‡§≤, ‡§™‡§æ‡§∞‡•ç‡§ï‡§ø‡§Ç‡§ó, ‡§î‡§∞ ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§ï‡§∞ (State Taxes) ‡§ó‡•ç‡§∞‡§æ‡§π‡§ï ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§Æ‡•å‡§ï‡•á ‡§™‡§∞ ‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§ï‡§ø‡§è ‡§ú‡§æ‡§è‡§Ç‡§ó‡•á‡•§
     </p>
    </div>
   </div>
  </section><!-- Terms & Conditions (AC Style) -->
  <section class="py-16 bg-gray-100">
   <div class="container mx-auto px-4">
    <h3 class="text-3xl font-extrabold text-center mb-12 text-gray-800">Why Choose Our Professional Service?</h3>
    <div class="max-w-5xl mx-auto">
     <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <!-- Service Promise Card -->
      <div class="bg-white rounded-xl shadow-2xl p-6 border-b-4 border-blue-500 hover:shadow-3xl transition-all duration-300">
       <div class="text-center mb-4">
        <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3 text-blue-600"><i class="fas fa-route text-3xl"></i>
        </div>
        <h4 class="font-extrabold text-xl text-gray-800 mb-2">Service Promise</h4>
       </div>
       <ul class="space-y-3 text-sm text-gray-600">
        <li class="flex items-start space-x-2"><span class="text-green-500 mt-1">‚úì</span> <span>Transparent pricing with no hidden charges.</span></li>
        <li class="flex items-start space-x-2"><span class="text-green-500 mt-1">‚úì</span> <span>Trained drivers guarantee safe journey.</span></li>
        <li class="flex items-start space-x-2"><span class="text-green-500 mt-1">‚úì</span> <span>Base fare includes 80KM distance.</span></li>
       </ul>
      </div>
      <!-- Payment Terms Card -->
      <div class="bg-white rounded-xl shadow-2xl p-6 border-b-4 border-green-500 hover:shadow-3xl transition-all duration-300">
       <div class="text-center mb-4">
        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3 text-green-600"><i class="fas fa-coins text-3xl"></i>
        </div>
        <h4 class="font-extrabold text-xl text-gray-800 mb-2">Payment Flexibility</h4>
       </div>
       <ul class="space-y-3 text-sm text-gray-600">
        <li class="flex items-start space-x-2"><span class="text-green-500 mt-1">‚úì</span> <span>Low upfront booking fee (‚Çπ99).</span></li>
        <li class="flex items-start space-x-2"><span class="text-green-500 mt-1">‚úì</span> <span>Pay remaining balance (Cash/UPI) to the driver.</span></li>
        <li class="flex items-start space-x-2"><span class="text-green-500 mt-1">‚úì</span> <span>Secure Razorpay gateway for online payment.</span></li>
       </ul>
      </div>
      <!-- Contact & Support Card -->
      <div class="bg-white rounded-xl shadow-2xl p-6 border-b-4 border-purple-500 hover:shadow-3xl transition-all duration-300">
       <div class="text-center mb-4">
        <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3 text-purple-600"><i class="fas fa-map-marked-alt text-3xl"></i>
        </div>
        <h4 class="font-extrabold text-xl text-gray-800 mb-2">Travel Coverage</h4>
       </div>
       <ul class="space-y-3 text-sm text-gray-600">
        <li class="flex items-start space-x-2"><span class="text-green-500 mt-1">‚úì</span> <span>Local, Outstation, and Airport transfers.</span></li>
        <li class="flex items-start space-x-2"><span class="text-green-500 mt-1">‚úì</span> <span>Night charge only ‚Çπ500 (10 PM to 6 AM).</span></li>
        <li class="flex items-start space-x-2"><span class="text-green-500 mt-1">‚úì</span> <span>Coverage across Sonipat, Delhi NCR &amp; North India.</span></li>
       </ul>
      </div>
     </div>
     <!-- Additional Info Banner -->
     <div class="mt-10 bg-gradient-to-r from-green-500 to-blue-500 rounded-xl p-6 text-white text-center shadow-lg">
      <div class="flex items-center justify-center space-x-4"><span class="text-3xl">üõ£Ô∏è</span>
       <div>
        <h5 class="font-extrabold text-xl">Travel with Safety and Comfort Guaranteed</h5>
        <p class="text-sm opacity-90">Book with confidence. We ensure quality and peace of mind.</p>
       </div><span class="text-3xl">üëç</span>
      </div>
     </div>
    </div>
   </div>
  </section><!-- Footer (AC Style) -->
  <footer class="bg-gray-900 text-white pt-12">
   <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
     <div>
      <h4 class="text-xl font-extrabold mb-4 text-blue-400">Contact Information</h4>
      <div class="space-y-2 text-sm">
       <p class="flex items-center">üìû <span class="ml-2 font-semibold" id="footer-phone">8816014071</span></p>
       <p class="flex items-center">‚úâÔ∏è <span class="ml-2" id="footer-email">care@sonipathomeservice.com</span></p>
       <p class="flex items-center">üìç <span class="ml-2" id="office-address">128/1, Sainipura, Sonipat</span></p>
      </div>
     </div>
     <div>
      <h4 class="text-xl font-extrabold mb-4 text-blue-400">Vehicle Categories</h4>
      <ul class="space-y-2 text-sm">
       <li><a href="#" class="hover:text-blue-400 transition-colors">‚Ä¢ 5 Seater Sedan/Hatchback</a></li>
       <li><a href="#" class="hover:text-blue-400 transition-colors">‚Ä¢ 7 Seater MPV (Ertiga)</a></li>
       <li><a href="#" class="hover:text-blue-400 transition-colors">‚Ä¢ Tempo Traveller (9+ Seater)</a></li>
       <li><a href="#" class="hover:text-blue-400 transition-colors">‚Ä¢ Large Bus/Coach</a></li>
      </ul>
     </div>
     <div>
      <h4 class="text-xl font-extrabold mb-4 text-blue-400">Follow Us</h4>
      <div class="flex space-x-4 text-2xl"><a href="https://facebook.com/sonipathomeservice" target="_blank" rel="noopener noreferrer" class="hover:text-blue-400 transition-colors"><i class="fab fa-facebook-f"></i></a> <a href="https://instagram.com/sonipathomeservice" target="_blank" rel="noopener noreferrer" class="hover:text-blue-400 transition-colors"><i class="fab fa-instagram"></i></a> <a href="https://wa.me/918816014071" target="_blank" rel="noopener noreferrer" class="hover:text-blue-400 transition-colors"><i class="fab fa-whatsapp"></i></a>
      </div>
     </div>
    </div>
    <!-- Marquee Slider for All Services -->
    <div style="background: #374151; padding: 15px 0; margin-top: 30px; border-radius: 10px;">
     <div style="max-width: 1200px; margin: 0 auto;">
      <h4 style="text-align: center; color: #60a5fa; margin-bottom: 10px; font-size: 16px; font-weight: bold;">All Our Services</h4>
      <div class="services-slider">
       <div class="services-track"><a href="book-ac-services.html" target="_blank" rel="noopener noreferrer">‚ùÑÔ∏è AC Installation &amp; Repair</a> <a href="book-fridge-refrigrator-services.html" target="_blank" rel="noopener noreferrer">üßä Refrigerator Repair</a> <a href="book-washing-machine-services.html" target="_blank" rel="noopener noreferrer">üåÄ Washing Machine Repair</a> <a href="book-tv-repair.html" target="_blank" rel="noopener noreferrer">üì∫ TV Repair</a> <a href="book-geyser-services.html" target="_blank" rel="noopener noreferrer">üî• Geyser Repair</a> <a href="electricianservice.html" target="_blank" rel="noopener noreferrer">‚ö° Electrician Service</a> <a href="book-ro-serrvice.html" target="_blank" rel="noopener noreferrer">üíß RO Water Purifier</a> <a href="book-chimney-cleaning.html" target="_blank" rel="noopener noreferrer">üè† Chimney Cleaning</a> <a href="book-safty-tank-service.html" target="_blank" rel="noopener noreferrer">üöΩ Septic Tank Cleaning</a> <a href="book-sewerage-unblock-service.html" target="_blank" rel="noopener noreferrer">üîß Sewerage Unblocking</a> <a href="book-pasti-control-service.html" target="_blank" rel="noopener noreferrer">üêõ Pest Control Service</a> <a href="book-Sofa-cleaning.html" target="_blank" rel="noopener noreferrer">üõãÔ∏è Sofa Cleaning</a> <a href="watertankcleaning.html" target="_blank" rel="noopener noreferrer">ü™£ Water Tank Cleaning</a> <a href="book-wifi-service.html" target="_blank" rel="noopener noreferrer">üì∂ Wi-Fi Setup</a> <a href="Book-dth-installation-service.html" target="_blank" rel="noopener noreferrer">üì° DTH Installation</a> <a href="book-cctv-service.html" target="_blank" rel="noopener noreferrer">üìπ CCTV Installation</a> <a href="book-borewell-service.html" target="_blank" rel="noopener noreferrer">üï≥Ô∏è Borewell Service</a> <a href="book-chinai-mistri.html" target="_blank" rel="noopener noreferrer">üß± Masonry Work</a> <a href="book-building-material-supply.html" target="_blank" rel="noopener noreferrer">üèóÔ∏è Building Material Supply</a> <a href="book-solar-installation.html" target="_blank" rel="noopener noreferrer">‚òÄÔ∏è Solar Panel Installation</a> <a href="book-ro-water-services-services.html" target="_blank" rel="noopener noreferrer">üí¶ RO Water Service</a> <a href="website-design-service.html" target="_blank" rel="noopener noreferrer">üíª Website Design</a> <a href="book-bricks.html" target="_blank" rel="noopener noreferrer">üß± Bricks Supply</a> <a href="book-halwai-service.html" target="_blank" rel="noopener noreferrer">üç∞ Halwai Service</a> <a href="comingsoon.html" target="_blank" rel="noopener noreferrer">üçΩÔ∏è Catering Service</a> <a href="book-barber-service.html" target="_blank" rel="noopener noreferrer">‚úÇÔ∏è Barber Service</a> <a href="index.html" target="_blank" rel="noopener noreferrer">üíÑ Ladies Corner</a> <a href="book-vehicle-service.html" target="_blank" rel="noopener noreferrer">üöó Vehicle Service</a> <a href="automobile-repairing-services.html" target="_blank" rel="noopener noreferrer">üîß Car Repair</a> <a href="book-parcel-delivery-service-services.html" target="_blank" rel="noopener noreferrer">üì¶ Parcel Delivery</a> <span style="color: #9ca3af;">üí∞ Loan Service (Coming Soon)</span> <!-- Duplicate for seamless loop --> <a href="book-ac-services.html" target="_blank" rel="noopener noreferrer">‚ùÑÔ∏è AC Installation &amp; Repair</a> <a href="book-fridge-refrigrator-services.html" target="_blank" rel="noopener noreferrer">üßä Refrigerator Repair</a> <a href="book-washing-machine-services.html" target="_blank" rel="noopener noreferrer">üåÄ Washing Machine Repair</a> <a href="book-tv-repair.html" target="_blank" rel="noopener noreferrer">üì∫ TV Repair</a> <a href="book-geyser-services.html" target="_blank" rel="noopener noreferrer">üî• Geyser Repair</a> <a href="electricianservice.html" target="_blank" rel="noopener noreferrer">‚ö° Electrician Service</a> <a href="book-ro-serrvice.html" target="_blank" rel="noopener noreferrer">üíß RO Water Purifier</a> <a href="book-chimney-cleaning.html" target="_blank" rel="noopener noreferrer">üè† Chimney Cleaning</a> <a href="book-safty-tank-service.html" target="_blank" rel="noopener noreferrer">üöΩ Septic Tank Cleaning</a> <a href="book-sewerage-unblock-service.html" target="_blank" rel="noopener noreferrer">üîß Sewerage Unblocking</a> <a href="book-pasti-control-service.html" target="_blank" rel="noopener noreferrer">üêõ Pest Control Service</a> <a href="book-Sofa-cleaning.html" target="_blank" rel="noopener noreferrer">üõãÔ∏è Sofa Cleaning</a> <a href="watertankcleaning.html" target="_blank" rel="noopener noreferrer">ü™£ Water Tank Cleaning</a> <a href="book-wifi-service.html" target="_blank" rel="noopener noreferrer">üì∂ Wi-Fi Setup</a> <a href="Book-dth-installation-service.html" target="_blank" rel="noopener noreferrer">üì° DTH Installation</a> <a href="book-cctv-service.html" target="_blank" rel="noopener noreferrer">üìπ CCTV Installation</a> <a href="book-borewell-service.html" target="_blank" rel="noopener noreferrer">üï≥Ô∏è Borewell Service</a> <a href="book-chinai-mistri.html" target="_blank" rel="noopener noreferrer">üß± Masonry Work</a> <a href="book-building-material-supply.html" target="_blank" rel="noopener noreferrer">üèóÔ∏è Building Material Supply</a> <a href="book-solar-installation.html" target="_blank" rel="noopener noreferrer">‚òÄÔ∏è Solar Panel Installation</a> <a href="book-ro-water-services-services.html" target="_blank" rel="noopener noreferrer">üí¶ RO Water Service</a> <a href="website-design-service.html" target="_blank" rel="noopener noreferrer">üíª Website Design</a> <a href="book-bricks.html" target="_blank" rel="noopener noreferrer">üß± Bricks Supply</a> <a href="book-halwai-service.html" target="_blank" rel="noopener noreferrer">üç∞ Halwai Service</a> <a href="comingsoon.html" target="_blank" rel="noopener noreferrer">üçΩÔ∏è Catering Service</a> <a href="book-barber-service.html" target="_blank" rel="noopener noreferrer">‚úÇÔ∏è Barber Service</a> <a href="index.html" target="_blank" rel="noopener noreferrer">üíÑ Ladies Corner</a> <a href="book-vehicle-service.html" target="_blank" rel="noopener noreferrer">üöó Vehicle Service</a> <a href="automobile-repairing-services.html" target="_blank" rel="noopener noreferrer">üîß Car Repair</a> <a href="book-parcel-delivery-service-services.html" target="_blank" rel="noopener noreferrer">üì¶ Parcel Delivery</a> <span style="color: #9ca3af;">üí∞ Loan Service (Coming Soon)</span>
       </div>
      </div>
     </div>
    </div>
    <div class="border-t border-gray-800 mt-8 pt-6 pb-2 text-center text-sm">
     <p>¬© 2024 Car Booking For Travel in Sonipat. All rights reserved.</p>
    </div>
   </div>
  </footer><!-- Cart Popup (AC Style) -->
  <div id="cart-popup" class="fixed inset-0 bg-black bg-opacity-50 popup-overlay hidden z-50">
   <div class="flex items-center justify-center min-h-full p-4">
    <div class="bg-white rounded-xl shadow-2xl max-w-md w-full popup-content">
     <div class="p-6">
      <div class="flex justify-between items-center mb-4 border-b pb-3">
       <h3 class="text-2xl font-extrabold text-gray-800">Your Booking</h3><button id="close-cart" class="text-gray-500 hover:text-red-600 transition-colors p-1 rounded-full bg-gray-100">
        <svg class="w-6 h-6" fill="currentColor" viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
        </svg></button>
      </div>
      <div id="cart-items" class="space-y-3 mb-4 max-h-60 overflow-y-auto"><!-- Cart items will be populated here -->
      </div>
      <div class="border-t pt-4">
       <div class="space-y-2 mb-4">
        <div class="flex justify-between items-center"><span class="text-gray-600 font-semibold">Base Price:</span> <span class="font-extrabold text-lg">‚Çπ<span id="cart-total">0</span></span>
        </div>
        <div class="flex justify-between items-center text-blue-600"><span class="font-semibold">Booking Charge:</span> <span class="font-extrabold">‚Çπ<span id="cart-booking-charge">99</span></span>
        </div>
        <div class="flex justify-between items-center text-green-600"><span class="font-semibold">Onsite Balance:</span> <span class="font-extrabold">‚Çπ<span id="onsite-balance">0</span></span>
        </div>
        <div class="border-t pt-3 flex justify-between items-center mt-2"><span class="font-extrabold text-xl text-gray-900">Pay Now:</span> <span class="font-extrabold text-xl text-red-600">‚Çπ<span id="cart-pay-now">99</span></span>
        </div>
       </div><button id="proceed-checkout" class="w-full btn-primary text-white py-3 rounded-xl font-extrabold text-lg transform hover:scale-[1.01] transition-transform disabled:opacity-50" disabled> <span id="cart-button-text">Book Vehicle - Pay ‚Çπ99</span> </button>
      </div>
     </div>
    </div>
   </div>
  </div><!-- Checkout Form Popup (AC Style) -->
  <div id="checkout-popup" class="fixed inset-0 bg-black bg-opacity-50 popup-overlay hidden z-50">
   <div class="flex items-start justify-center min-h-full p-2 py-4">
    <div class="bg-white rounded-xl shadow-2xl max-w-md w-full popup-content" style="max-height: 95vh; overflow-y: auto;">
     <div class="sticky top-0 bg-white p-4 border-b flex justify-between items-center z-10">
      <h3 class="text-xl font-extrabold">Customer Details & Travel Plan</h3><button id="close-checkout" class="text-gray-500 hover:text-red-600 transition-colors p-1 rounded-full bg-gray-100">
       <svg class="w-5 h-5" fill="currentColor" viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
       </svg></button>
     </div>
     <div class="p-4">
      <div id="success-message-ui" class="hidden bg-green-100 text-green-800 p-4 rounded-xl mb-4 font-semibold border-l-4 border-green-500"></div>
      <div id="error-message-ui" class="hidden bg-red-100 text-red-800 p-4 rounded-xl mb-4 font-semibold border-l-4 border-red-500"></div>
      <form id="checkout-form" class="space-y-4">
       <div class="space-y-2">
        <div><label class="block text-sm font-medium text-gray-700 mb-1">Customer Name *</label> <input type="text" id="customer-name" required class="w-full px-3 py-2 text-base border-2 border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition-colors" placeholder="Enter your full name">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1">Mobile Number *</label> <input type="tel" id="mobile-number" required pattern="[0-9]{10}" maxlength="10" class="w-full px-3 py-2 text-base border-2 border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition-colors" placeholder="Enter 10-digit mobile number">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1">Email ID *</label> <input type="email" id="email-id" required class="w-full px-3 py-2 text-base border-2 border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition-colors" placeholder="Enter your email address">
        </div>
       </div>
       <div class="space-y-2 border-t pt-4">
        <div><label class="block text-sm font-medium text-gray-700 mb-1">Pickup Location *</label> <input type="text" id="pickup-location" required class="w-full px-3 py-2 text-base border-2 border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition-colors" placeholder="Enter full pickup address">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1">Drop Location *</label> <input type="text" id="drop-location" required class="w-full px-3 py-2 text-base border-2 border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition-colors" placeholder="Enter full destination address">
        </div>
        <div class="grid grid-cols-2 gap-4">
         <div><label class="block text-sm font-medium text-gray-700 mb-1">Travel Date *</label> <input type="date" id="travel-date" required class="w-full px-3 py-2 text-base border-2 border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition-colors">
         </div>
         <div><label class="block text-sm font-medium text-gray-700 mb-1">Travel Time *</label> <input type="time" id="travel-time" required class="w-full px-3 py-2 text-base border-2 border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition-colors">
         </div>
        </div>
       </div>
       <div class="km-calculator-card">
        <h4 class="font-extrabold text-gray-800 mb-2">Estimate Trip Cost (Optional)</h4><label class="block text-sm font-medium text-gray-700 mb-1" for="estimated-km">Estimated Distance (KM)</label> <input type="number" id="estimated-km" class="km-input" min="1" placeholder="Enter estimated distance in KM (e.g., 250)" oninput="calculatePrice()">
        <div class="night-charge-checkbox"><input type="checkbox" id="night-charge" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500" onchange="calculatePrice()"> <label for="night-charge" class="text-sm font-medium text-gray-700">Night Charge (10 PM - 6 AM) +‚Çπ500</label>
        </div>
        <div class="price-breakdown-box" id="price-breakdown" style="display: none;"></div>
       </div>
       <div class="border-t pt-4 mt-4">
        <h4 class="text-lg font-extrabold mb-3">Payment Summary</h4>
        <div class="space-y-2 mb-4 bg-blue-50 p-3 rounded-lg border border-blue-200">
         <div class="flex justify-between items-center text-sm"><span class="text-gray-700 font-semibold">Total Estimated Fare:</span> <span class="font-extrabold">‚Çπ<span id="checkout-total">0</span></span>
         </div>
         <div class="flex justify-between items-center text-blue-700 text-sm"><span class="font-semibold">Booking Charge (Non-refundable):</span> <span class="font-extrabold">‚Çπ<span id="checkout-booking-charge">99</span></span>
         </div>
         <div class="flex justify-between items-center text-green-700 text-sm"><span class="font-semibold">Onsite Balance:</span> <span class="font-extrabold">‚Çπ<span id="checkout-onsite-balance">0</span></span>
         </div>
         <div class="border-t border-blue-300 pt-3 flex justify-between items-center mt-2"><span class="font-extrabold text-xl text-gray-900">Pay Now:</span> <span class="font-extrabold text-xl text-red-600">‚Çπ<span id="checkout-pay-now">99</span></span>
         </div>
        </div>
        <div class="bg-yellow-50 border border-yellow-300 rounded-xl p-3 mb-4">
         <p class="text-xs text-yellow-800"><strong>Note:</strong> You are paying only the booking charge (‚Çπ<span id="note-booking-charge">99</span>) now. <span id="onsite-note">Remaining estimated amount will be paid to the driver after the trip.</span></p>
        </div><button type="submit" id="pay-now" class="w-full btn-primary text-white py-3 rounded-xl font-extrabold text-lg transform hover:scale-[1.01] transition-transform"> <span id="checkout-button-text">Pay ‚Çπ99 Booking Charge</span> </button>
       </div>
      </form>
     </div>
    </div>
   </div>
  </div>
  <div id="loading-overlay" class="loading-overlay hidden">
   <div class="animate-spin rounded-full h-12 w-12 border-b-4 border-blue-700 mb-4"></div>
   Processing your booking...
  </div>
  <script>
        // Configuration
        const defaultConfig = {
            company_name: "Car Booking For Travel",
            customer_care: "8816014071",
            email_address: "care@sonipathomeservice.com",
            office_address: "128/1, Sainipura, Sonipat"
        };
        
        // Vehicle Services data
        const services = [
            {
                id: 1,
                name: "ECCO 5 Seater",
                price: 1699, // Base Fare (< 80KM)
                kmRate: 10,
                icon: "fas fa-car",
                description: "Compact Car - Perfect for City Travel. Base Fare: ‚Çπ1,699 (< 80KM). Above 80KM: ‚Çπ10/KM."
            },
            {
                id: 2,
                name: "Desire 5 Seater",
                price: 1799,
                kmRate: 11,
                icon: "fas fa-taxi",
                description: "Premium Sedan - Comfortable Travel. Base Fare: ‚Çπ1,799 (< 80KM). Above 80KM: ‚Çπ11/KM."
            },
            {
                id: 3,
                name: "Ertiga 7 Seater",
                price: 2299,
                kmRate: 14,
                icon: "fas fa-shuttle-van",
                description: "Family MPV - Perfect for Groups. Base Fare: ‚Çπ2,299 (< 80KM). Above 80KM: ‚Çπ14/KM."
            },
            {
                id: 4,
                name: "Tempo Traveller (9-12 Seater)",
                price: 6250,
                kmRate: 25,
                icon: "fas fa-bus",
                description: "Mini Bus - Group Travel. Base Fare: ‚Çπ6,250 (< 80KM). Above 80KM: ‚Çπ25/KM."
            },
            {
                id: 5,
                name: "Tempo Traveller (15-18 Seater)",
                price: 6750,
                kmRate: 27,
                icon: "fas fa-bus-alt",
                description: "Large Van - Medium Groups. Base Fare: ‚Çπ6,750 (< 80KM). Above 80KM: ‚Çπ27/KM."
            },
            {
                id: 6,
                name: "Tempo Traveller (25 Seater)",
                price: 8750,
                kmRate: 35,
                icon: "fas fa-truck-moving",
                description: "Mini Bus - Maximum Capacity. Base Fare: ‚Çπ8,750 (< 80KM). Above 80KM: ‚Çπ35/KM."
            }
        ];

        // Cart functionality
        let cart = [];
        let currentRecordCount = 0;
        let selectedVehicle = null;

        // --- Core Functions (AC Page Logic Refit) ---

        function getVehicleSVG(vehicleName) {
            // Placeholder SVG generator based on vehicle type
            const baseColor = "#0f62fe";
            const accentColor = "#1e40af";
            const wheelColor = "#374151";
            let svgContent = '';
            
            if (vehicleName.includes('ECCO') || vehicleName.includes('Desire')) {
                // Car (Sedan/Hatchback)
                svgContent = `<svg class="vehicle-svg" viewBox="0 0 200 120" xmlns="http://www.w3.org/2000/svg">
                    <rect x="15" y="45" width="170" height="45" rx="10" fill="${baseColor}" stroke="${accentColor}" stroke-width="2" />
                    <rect x="35" y="25" width="130" height="25" rx="12" fill="${accentColor}" stroke="${baseColor}" stroke-width="2" />
                    <rect x="40" y="30" width="40" height="15" rx="3" fill="#e0f2fe" stroke="#0369a1" stroke-width="1" />
                    <rect x="120" y="30" width="40" height="15" rx="3" fill="#e0f2fe" stroke="#0369a1" stroke-width="1" />
                    <circle cx="45" cy="95" r="18" fill="${wheelColor}" stroke="#1f2937" stroke-width="2" />
                    <circle cx="155" cy="95" r="18" fill="${wheelColor}" stroke="#1f2937" stroke-width="2" />
                </svg>`;
            } else if (vehicleName.includes('Ertiga')) {
                // MPV/SUV
                svgContent = `<svg class="vehicle-svg" viewBox="0 0 220 120" xmlns="http://www.w3.org/2000/svg">
                    <rect x="10" y="40" width="200" height="50" rx="12" fill="${baseColor}" stroke="${accentColor}" stroke-width="2" />
                    <rect x="25" y="20" width="170" height="25" rx="12" fill="${accentColor}" stroke="${baseColor}" stroke-width="2" />
                    <rect x="30" y="25" width="35" height="15" rx="3" fill="#e0f2fe" stroke="#0369a1" stroke-width="1" />
                    <rect x="160" y="25" width="35" height="15" rx="3" fill="#e0f2fe" stroke="#0369a1" stroke-width="1" />
                    <circle cx="50" cy="95" r="20" fill="${wheelColor}" stroke="#1f2937" stroke-width="2" />
                    <circle cx="170" cy="95" r="20" fill="${wheelColor}" stroke="#1f2937" stroke-width="2" />
                </svg>`;
            } else if (vehicleName.includes('Tempo Traveller')) {
                // Van/Bus
                 svgContent = `<svg class="vehicle-svg" viewBox="0 0 280 120" xmlns="http://www.w3.org/2000/svg">
                    <rect x="10" y="20" width="260" height="70" rx="20" fill="${accentColor}" stroke="${baseColor}" stroke-width="2" />
                    <rect x="15" y="5" width="250" height="20" rx="15" fill="${baseColor}" stroke="${accentColor}" stroke-width="2" />
                    <rect x="25" y="35" width="220" height="35" rx="5" fill="#e0f2fe" stroke="#0369a1" stroke-width="1" />
                    <circle cx="60" cy="95" r="26" fill="${wheelColor}" stroke="#1f2937" stroke-width="2" />
                    <circle cx="220" cy="95" r="26" fill="${wheelColor}" stroke="#1f2937" stroke-width="2" />
                </svg>`;
            }
            return svgContent;
        }


        function renderServices() {
            const servicesGrid = document.getElementById('services-grid');
            servicesGrid.innerHTML = services.map(service => `
                <div class="service-card" onclick="addToCart(${service.id})">
                    <div class="service-card-content">
                        <div class="vehicle-image">
                            ${getVehicleSVG(service.name)}
                        </div>
                        <div class="flex items-start mb-4">
                            <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 text-blue-600 mr-4 shadow-lg">
                                <i class="${service.icon} text-xl icon-hover"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-extrabold text-lg mb-1 text-gray-800 leading-snug">${service.name}</h4>
                                <p class="text-gray-600 text-xs">${service.description}</p>
                            </div>
                        </div>
                        <div class="flex justify-between items-center pt-2 border-t border-gray-100">
                            <div class="flex items-center space-x-2">
                                <span class="text-2xl font-extrabold text-red-600">‚Çπ${service.price}</span>
                                ${service.originalPrice ? `<span class="text-sm text-gray-500 line-through">‚Çπ${service.originalPrice}</span>` : ''}
                            </div>
                            <button class="btn-primary text-white px-4 py-2 rounded-full font-semibold text-sm shadow-lg hover:shadow-xl transition-all duration-300">
                                Book Now
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function addToCart(serviceId) {
            const service = services.find(s => s.id === serviceId);
            
            // Clear existing cart (only one vehicle booking at a time)
            cart = [];
            
            // Set selected vehicle for cost calculation
            selectedVehicle = {
                name: service.name,
                baseFare: service.price,
                kmRate: service.kmRate
            };
            
            // Add to cart with base price initially
            cart.push({ ...service, quantity: 1, calculatedPrice: service.price });
            
            // Update UI and show checkout popup directly
            updateCartUI();
            showCheckoutPopup(); // Changed from showing cart popup to showing checkout popup directly
        }

        function removeFromCart(serviceId) {
            cart = cart.filter(item => item.id !== serviceId);
            selectedVehicle = null;
            updateCartUI();
            if (cart.length === 0) {
                hideCartPopup(); 
                hideCheckoutPopup();
            }
        }
        
        function removeItemFromCart(serviceId) {
             cart = cart.filter(item => item.id !== serviceId);
             selectedVehicle = null;
             updateCartUI();
             if (cart.length === 0) {
                hideCartPopup();
                hideCheckoutPopup();
            }
        }

        function updateCartUI() {
            const cartCount = document.getElementById('cart-count');
            const cartItems = document.getElementById('cart-items');
            const onsiteBalance = document.getElementById('onsite-balance');
            const checkoutOnsiteBalance = document.getElementById('checkout-onsite-balance');
            const proceedBtn = document.getElementById('proceed-checkout');
            
            const totalItems = cart.length;
            const totalAmount = cart.length > 0 ? cart[0].calculatedPrice : 0; // Use calculated price if available
            
            // Fixed booking charge of 99 INR, but never more than the total amount
            const bookingCharge = totalAmount < 99 ? totalAmount : 99; 
            const onsiteAmount = Math.max(0, totalAmount - bookingCharge);
            
            if (totalItems > 0) {
                cartCount.textContent = totalItems;
                cartCount.classList.remove('hidden');
                cartCount.classList.add('cart-badge');
            } else {
                cartCount.classList.add('hidden');
                cartCount.classList.remove('cart-badge');
                cartItems.innerHTML = '<p class="text-center text-gray-500 italic p-4">‡§Ü‡§™‡§ï‡§æ ‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§ï‡§æ‡§∞‡•ç‡§ü ‡§ñ‡§æ‡§≤‡•Ä ‡§π‡•à‡•§</p>';
            }
            
            cartItems.innerHTML = cart.map(item => `
                <div class="flex justify-between items-center p-3 bg-blue-50 rounded-lg border border-blue-100">
                    <div class="flex-1">
                        <h5 class="font-bold text-base text-gray-800">${item.name}</h5>
                        <p class="text-gray-600 text-xs mt-1">Base: ‚Çπ${item.price} | Rate: ‚Çπ${item.kmRate}/KM</p>
                    </div>
                    <div class="flex flex-col items-end space-y-1">
                        <span class="font-extrabold text-lg text-red-600">‚Çπ${item.calculatedPrice || item.price}</span>
                        <button onclick="removeItemFromCart(${item.id})" class="text-red-500 hover:text-red-700 text-xs">
                            <i class="fas fa-trash-alt mr-1"></i> Remove
                        </button>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('cart-total').textContent = totalAmount;
            document.getElementById('checkout-total').textContent = totalAmount;
            
            // Update booking charge displays
            const elementsToUpdate = [
                'cart-booking-charge', 'checkout-booking-charge', 'cart-pay-now', 
                'checkout-pay-now', 'note-booking-charge'
            ];
            elementsToUpdate.forEach(id => {
                const el = document.getElementById(id);
                if (el) el.textContent = bookingCharge;
            });

            // Update onsite note based on balance
            const onsiteNote = document.getElementById('onsite-note');
            if (onsiteNote) {
                onsiteNote.textContent = `Remaining estimated amount will be paid to the driver after the trip.`;
            }
            
            if (onsiteBalance) onsiteBalance.textContent = onsiteAmount;
            if (checkoutOnsiteBalance) checkoutOnsiteBalance.textContent = onsiteAmount;
            
            // Enable/Disable checkout button based on cart items
            proceedBtn.disabled = cart.length === 0;
            
            document.getElementById('cart-button-text').textContent = `Book Vehicle - Pay ‚Çπ${bookingCharge}`;
            document.getElementById('checkout-button-text').textContent = `Pay ‚Çπ${bookingCharge} Booking Charge`;
            
            // Recalculate price breakdown in checkout form if open
            if (!document.getElementById('checkout-popup').classList.contains('hidden')) {
                calculatePrice();
            }
        }
        
        function calculatePrice() {
            if (!selectedVehicle) return;
            
            const kmInput = document.getElementById('estimated-km');
            const nightChargeCheckbox = document.getElementById('night-charge');
            const priceBreakdown = document.getElementById('price-breakdown');
            const checkoutTotalEl = document.getElementById('checkout-total');
            const checkoutOnsiteBalanceEl = document.getElementById('checkout-onsite-balance');
            const bookingCharge = 99;
            
            const estimatedKm = parseInt(kmInput.value) || 0;
            const isNightCharge = nightChargeCheckbox.checked;
            
            if (estimatedKm >= 0) {
                let totalPrice = selectedVehicle.baseFare;
                let breakdownHTML = `<strong>Vehicle Base Fare:</strong> ‚Çπ${selectedVehicle.baseFare} (Upto 80KM)`;
                
                if (estimatedKm > 80) {
                    const extraKm = estimatedKm - 80;
                    const extraCharge = extraKm * selectedVehicle.kmRate;
                    totalPrice += extraCharge;
                    breakdownHTML += `<br><strong>Extra KM Charge:</strong> ${extraKm} KM @ ‚Çπ${selectedVehicle.kmRate}/KM: ‚Çπ${extraCharge}`;
                } else if (estimatedKm > 0) {
                     breakdownHTML += `<br><strong>Distance:</strong> ${estimatedKm} KM (Included in Base Fare)`;
                } else {
                    // Show message if KM is 0 or empty but vehicle is selected
                    priceBreakdown.style.display = 'block';
                    priceBreakdown.innerHTML = `<span class="text-red-600">‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§®‡•Å‡§Æ‡§æ‡§®‡§ø‡§§ ‡§¶‡•Ç‡§∞‡•Ä (KM) ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§</span>`;
                    // Reset price to base fare if KM is 0
                    totalPrice = selectedVehicle.baseFare;
                    if (cart.length > 0) cart[0].calculatedPrice = totalPrice;
                    updateCartUI();
                    checkoutTotalEl.textContent = totalPrice;
                    checkoutOnsiteBalanceEl.textContent = Math.max(0, totalPrice - bookingCharge);
                    return;
                }
                
                if (isNightCharge) {
                    totalPrice += 500;
                    breakdownHTML += `<br><strong>Night Charge:</strong> ‚Çπ500`;
                }
                
                const onsiteAmount = Math.max(0, totalPrice - bookingCharge);
                
                breakdownHTML += `<br><hr class="my-1 border-blue-300"><strong>Total Estimated Fare:</strong> ‚Çπ${totalPrice}`;
                breakdownHTML += `<br><strong>Advance Paid:</strong> ‚Çπ${bookingCharge}`;
                breakdownHTML += `<br><strong>Remaining to Driver:</strong> ‚Çπ${onsiteAmount}`;
                
                priceBreakdown.innerHTML = breakdownHTML;
                priceBreakdown.style.display = 'block';
                
                // Update cart and checkout total with the new calculated price
                if (cart.length > 0) {
                    cart[0].calculatedPrice = totalPrice;
                    updateCartUI(); // Update cart count and total in the cart popup
                }
                
                // Update checkout display directly
                checkoutTotalEl.textContent = totalPrice;
                checkoutOnsiteBalanceEl.textContent = onsiteAmount;

            } else {
                priceBreakdown.style.display = 'none';
            }
        }


        function showCartPopup() {
            document.getElementById('cart-popup').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function hideCartPopup() {
            document.getElementById('cart-popup').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        function showCheckoutPopup() {
            if (cart.length === 0) return; // Guard clause
            
            hideCartPopup();
            document.getElementById('checkout-popup').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            
            // Set vehicle data on checkout form based on selectedVehicle
            const vehicleName = selectedVehicle.name;
            const totalAmount = selectedVehicle.baseFare;
            
            document.getElementById('checkout-total').textContent = totalAmount;
            document.getElementById('checkout-onsite-balance').textContent = Math.max(0, totalAmount - 99);
            document.getElementById('checkout-pay-now').textContent = 99;
            document.getElementById('note-booking-charge').textContent = 99;
            document.getElementById('checkout-button-text').textContent = `Pay ‚Çπ99 Booking Charge`;

            // Reset calculation fields every time the popup opens
            document.getElementById('estimated-km').value = '';
            document.getElementById('night-charge').checked = false;
            document.getElementById('price-breakdown').style.display = 'none';
            
            // Clear previous messages
            hideMessages();
        }

        function hideCheckoutPopup() {
            document.getElementById('checkout-popup').classList.add('hidden');
            document.body.style.overflow = 'auto';
            // Clear form and messages on close
            document.getElementById('checkout-form').reset();
            hideMessages();
            // Reset selected data when closing checkout without payment
            if (cart.length > 0) {
                cart[0].calculatedPrice = cart[0].price; // Reset price to base fare
                updateCartUI();
            }
        }

        // Message Popups (Success/Error/Loading)
        function showMessage(type, messageHTML) {
            const successEl = document.getElementById('success-message-ui');
            const errorEl = document.getElementById('error-message-ui');
            hideMessages();
            
            if (type === 'success') {
                successEl.innerHTML = messageHTML;
                successEl.classList.remove('hidden');
            } else if (type === 'error') {
                errorEl.innerHTML = messageHTML;
                errorEl.classList.remove('hidden');
            }
            // Auto hide success after 8 seconds
            if (type === 'success') {
                setTimeout(() => {
                    successEl.classList.add('hidden');
                }, 8000);
            }
        }

        function hideMessages() {
            document.getElementById('success-message-ui').classList.add('hidden');
            document.getElementById('error-message-ui').classList.add('hidden');
        }

        function showLoading() {
            document.getElementById('loading-overlay').classList.remove('hidden');
            document.getElementById('pay-now').disabled = true;
        }

        function hideLoading() {
            document.getElementById('loading-overlay').classList.add('hidden');
            document.getElementById('pay-now').disabled = false;
        }
        
        // Element SDK Configuration
        const elementConfig = {
            defaultConfig: defaultConfig,
            onConfigChange: async (config) => {
                // Update header/footer elements
                document.getElementById('company-name').textContent = config.company_name || defaultConfig.company_name;
                document.getElementById('email-address').textContent = config.email_address || defaultConfig.email_address;
                document.getElementById('office-address').textContent = config.office_address || defaultConfig.office_address;
                document.getElementById('footer-phone').textContent = config.customer_care || defaultConfig.customer_care;
                document.getElementById('footer-email').textContent = config.email_address || defaultConfig.email_address;
            },
            mapToCapabilities: (config) => ({
                recolorables: [],
                borderables: [],
                fontEditable: undefined,
                fontSizeable: undefined
            }),
            mapToEditPanelValues: (config) => new Map([
                ["company_name", config.company_name || defaultConfig.company_name],
                ["customer_care", config.customer_care || defaultConfig.customer_care],
                ["email_address", config.email_address || defaultConfig.email_address],
                ["office_address", config.office_address || defaultConfig.office_address]
            ])
        };

        // Initialize SDKs
        async function initializeApp() {
            try {
                if (window.dataSdk) {
                    const dataHandler = { onDataChanged(data) { currentRecordCount = data.length; console.log(`Current record count: ${currentRecordCount}`); } };
                    await window.dataSdk.init(dataHandler);
                }
                if (window.elementSdk) {
                    window.elementSdk.init(elementConfig);
                }
            } catch (error) {
                console.error("Error initializing app:", error);
            }
        }

        // Validate Form Data
        function validateFormData(formData) {
            const errors = [];
            
            if (!formData.customerName || formData.customerName.length < 2) {
                errors.push('‡§ï‡•É‡§™‡§Ø‡§æ ‡§µ‡•à‡§ß ‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç (‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ 2 ‡§Ö‡§ï‡•ç‡§∑‡§∞)');
            }
            
            if (!/^[0-9]{10}$/.test(formData.mobile)) {
                errors.push('‡§ï‡•É‡§™‡§Ø‡§æ ‡§µ‡•à‡§ß 10 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç');
            }
            
            if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(formData.email)) {
                errors.push('‡§ï‡•É‡§™‡§Ø‡§æ ‡§µ‡•à‡§ß ‡§à‡§Æ‡•á‡§≤ ‡§™‡§§‡§æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç');
            }
            
            if (!formData.pickupLocation || formData.pickupLocation.length < 5) {
                errors.push('‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§ø‡§ï‡§Ö‡§™ ‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç');
            }
            
            if (!formData.dropLocation || formData.dropLocation.length < 5) {
                errors.push('‡§ï‡•É‡§™‡§Ø‡§æ ‡§°‡•ç‡§∞‡•â‡§™ ‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç');
            }
            
            if (!formData.travelDate) {
                errors.push('‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§ï‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§ö‡•Å‡§®‡•á‡§Ç');
            }
            
            if (!formData.travelTime) {
                errors.push('‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§ï‡§æ ‡§∏‡§Æ‡§Ø ‡§ö‡•Å‡§®‡•á‡§Ç');
            }
            
            return errors;
        }


        // Razorpay payment integration
        function initiatePayment(customerData) {
            // Use the currently displayed total amount from cart, which reflects the KM calculation
            const totalAmount = cart.length > 0 ? cart[0].calculatedPrice : selectedVehicle.baseFare;
            const bookingCharge = totalAmount < 99 ? totalAmount : 99;
            
            // Check record limit
            if (currentRecordCount >= 999) {
                showMessage('error', '‚ö†Ô∏è ‡§Ö‡§ß‡§ø‡§ï‡§§‡§Æ 999 ‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§ï‡•Ä ‡§∏‡•Ä‡§Æ‡§æ ‡§™‡§π‡•Å‡§Å‡§ö ‡§ó‡§à ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§ï‡§∏‡•ç‡§ü‡§Æ‡§∞ ‡§ï‡•á‡§Ø‡§∞ ‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç: 8816014071‡•§');
                return;
            }

            if (typeof Razorpay === 'undefined') {
                showMessage('error', '‚ùå ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§ó‡•á‡§ü‡§µ‡•á ‡§≤‡•ã‡§° ‡§®‡§π‡•Ä‡§Ç ‡§π‡•Å‡§Ü‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•á‡§ú ‡§ï‡•ã ‡§∞‡•Ä‡§´‡§º‡•ç‡§∞‡•á‡§∂ ‡§ï‡§∞‡§ï‡•á ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§');
                return;
            }
            
            const options = {
                key: 'rzp_live_RLjzp7VlXERwiG', // Live Razorpay key
                amount: bookingCharge * 100, // Amount in paise
                currency: 'INR',
                name: 'Car Booking For Travel',
                description: `Booking Charge - ${selectedVehicle.name}`,
                image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiByeD0iMTIiIGZpbGw9IiMwZjYyZmUiLz4KPHN2ZyB4PSIxNiIgeT0iMTYiIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGQ9Ik0xOC45MiA2LjAxQzE4LjcyIDUuNDIgMTguMTYgNSAxNy41IDVIMTVWNEMxNSAyLjkgMTQuMSAyIDEzIDJIMTFDOS45IDIgOSAyLjkgOSA0VjVINi41QzUuODQgNSA1LjI4IDUuNDIgNS4wOCA2LjAxTDMgMTJWMjBDMyAyMS4xIDMuOSAyMiA1IDIySDZDNy4xIDIyIDggMjEuMSA4IDIwVjE5SDE2VjIwQzE2IDIxLjEgMTYuOSAyMiAxOCAyMkgxOUMyMC4xIDIyIDIxIDIxLjEgMjEgMjBWMTJMMTguOTIgNi4wMVpNNi41IDdIMTcuNUwxOSAxMUg1TDYuNSA3Wk02IDE1QzYuNTUgMTUgNyAxNS40NSA3IDE2UzcuNDUgMTcgNyAxN0g2QzUuNDUgMTcgNSAxNi41NSA1IDE2UzUuNDUgMTUgNiAxNVpNMTggMTVDMTguNTUgMTUgMTkgMTUuNDUgMTkgMTZTMTguNTUgMTcgMTggMTdIMTdDMTYuNDUgMTcgMTYgMTYuNTUgMTYgMTZTMTYuNDUgMTUgMTcgMTVIMThaTTExIDRIMTNWNUgxMVY0WiIvPgo8L3N2Zz4KPC9zdmc+',
                prefill: {
                    name: customerData.customerName,
                    email: customerData.email,
                    contact: customerData.mobile
                },
                theme: {
                    color: '#0f62fe'
                },
                handler: function(response) {
                    submitToGoogleSheets(customerData, response.razorpay_payment_id);
                },
                modal: {
                    ondismiss: function() {
                        hideLoading();
                        showMessage('error', '‚ùå ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§ï‡•à‡§Ç‡§∏‡§ø‡§≤ ‡§ï‡§∞ ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§™‡•Ç‡§∞‡•Ä ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§');
                    }
                }
            };
            
            try {
                showLoading();
                const rzp = new Razorpay(options);
                rzp.on('payment.failed', function (response) {
                    hideLoading();
                    const errorMsg = response.error.description || 'Unknown payment error';
                    showMessage('error', `‚ùå ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§µ‡§ø‡§´‡§≤: ${errorMsg}<br><br>‡§ï‡•É‡§™‡§Ø‡§æ ‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç ‡§Ø‡§æ ‡§ï‡§∏‡•ç‡§ü‡§Æ‡§∞ ‡§ï‡•á‡§Ø‡§∞ ‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç: 8816014071‡•§`);
                });
                rzp.open();
                
            } catch (error) {
                hideLoading();
                console.error('‚ùå Razorpay initialization error:', error);
                showMessage('error', '‚ùå ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§ó‡•á‡§ü‡§µ‡•á ‡§è‡§∞‡§∞‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•á‡§ú ‡§ï‡•ã ‡§∞‡•Ä‡§´‡§º‡•ç‡§∞‡•á‡§∂ ‡§ï‡§∞‡§ï‡•á ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§');
            }
        }

        // Google Sheets integration and Data SDK save
        async function submitToGoogleSheets(customerData, paymentId) {
            // Use the calculated total amount from cart
            const totalAmount = cart.length > 0 ? cart[0].calculatedPrice : selectedVehicle.baseFare;
            const bookingCharge = totalAmount < 99 ? totalAmount : 99;
            const onsiteBalance = Math.max(0, totalAmount - bookingCharge);
            
            const sheetData = {
                timestamp: new Date().toLocaleString('en-IN', { timeZone: 'Asia/Kolkata' }),
                customerName: customerData.customerName,
                mobile: customerData.mobile,
                email: customerData.email,
                pickupLocation: customerData.pickupLocation,
                dropLocation: customerData.dropLocation,
                travelDate: customerData.travelDate,
                travelTime: customerData.travelTime,
                vehicleType: selectedVehicle.name,
                estimatedKm: customerData.estimatedKm || 'Not specified',
                nightCharge: customerData.nightCharge ? 'Yes' : 'No',
                totalAmount: totalAmount,
                paidAmount: bookingCharge,
                onsiteBalance: onsiteBalance,
                paymentId: paymentId,
                status: `Advance Paid ‚Çπ${bookingCharge} - Remaining ‚Çπ${onsiteBalance} - Travel: ${customerData.travelDate} ${customerData.travelTime}`
            };

            const params = new URLSearchParams(sheetData);
            let sheetSaveSuccess = false;

            try {
                // Using the same App Script URL structure as the original AC file
                const response = await fetch('https://script.google.com/macros/s/AKfycbwR2uJ2Uslimb7A04lHdd9JwKdk-d02iqVO-PAht9CRUw9rRcusnGAdAjCT07SjZHiO/exec', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: params.toString()
                });
                if (response.ok || response.status === 200) {
                     console.log('‚úÖ Data sent to Google Sheet successfully');
                     sheetSaveSuccess = true;
                } else {
                     console.log('‚ö†Ô∏è Google Sheet POST failed, response status:', response.status);
                }
            } catch (error1) {
                console.log('‚ö†Ô∏è Google Sheet method failed', error1);
            }

            // Also save to Data SDK for backup
            if (window.dataSdk) {
                try {
                    const result = await window.dataSdk.create(sheetData);
                    if (result.isOk) {
                        console.log('‚úÖ Data also saved to Canva Sheet as backup');
                    }
                } catch (sdkError) {
                    console.error('‚ùå Data SDK save error:', sdkError);
                }
            }
            
            hideLoading();
            hideCheckoutPopup();

            // Show success message
            const sheetStatusMsg = sheetSaveSuccess ? 
                "‚úÖ ‡§Ü‡§™‡§ï‡•Ä ‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§∏‡•á‡§µ ‡§π‡•ã ‡§ó‡§à ‡§π‡•à!" : 
                "‚ö†Ô∏è ‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§≤‡•ã‡§ï‡§≤‡•Ä ‡§∏‡•á‡§µ ‡§π‡•ã ‡§ó‡§à ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ID ‡§ï‡§∏‡•ç‡§ü‡§Æ‡§∞ ‡§ï‡•á‡§Ø‡§∞ ‡§ï‡•ã ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç‡•§";

            const successMessage = `
                <div style="text-align: center;">
                    <div style="font-size: 1.5rem; margin-bottom: 15px;">üéâ ‡§¨‡•Å‡§ï‡§ø‡§Ç‡§ó ‡§∏‡§´‡§≤!</div>
                    <div style="margin-bottom: 10px;"><strong>‡§µ‡§æ‡§π‡§®:</strong> ${selectedVehicle.name}</div>
                    <div style="margin-bottom: 10px;"><strong>‡§ï‡•Å‡§≤ ‡§Ö‡§®‡•Å‡§Æ‡§æ‡§®‡§ø‡§§ ‡§ï‡§ø‡§∞‡§æ‡§Ø‡§æ:</strong> ‚Çπ${totalAmount}</div>
                    <div style="margin-bottom: 10px;"><strong>‡§è‡§°‡§µ‡§æ‡§Ç‡§∏ ‡§≠‡•Å‡§ó‡§§‡§æ‡§®:</strong> ‚Çπ${bookingCharge}</div>
                    <div style="margin-bottom: 10px; color: #10b981; font-weight: bold;"><strong>‡§¨‡§ï‡§æ‡§Ø‡§æ ‡§∞‡§æ‡§∂‡§ø:</strong> ‚Çπ${onsiteBalance} (‡§Æ‡•å‡§ï‡•á ‡§™‡§∞ ‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§ï‡§∞‡•á‡§Ç)</div>
                    <div style="margin-bottom: 10px;"><strong>‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ID:</strong> ${paymentId}</div>
                    <div style="margin-bottom: 15px;"><strong>‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§§‡§æ‡§∞‡•Ä‡§ñ/‡§∏‡§Æ‡§Ø:</strong> ${customerData.travelDate} at ${customerData.travelTime}</div>
                    <div style="background: rgba(14, 165, 233, 0.1); padding: 10px; border-radius: 8px; margin-top: 15px;">
                        <strong>${sheetStatusMsg}</strong><br>
                        ‡§π‡§Æ‡§æ‡§∞‡§æ ‡§°‡•ç‡§∞‡§æ‡§á‡§µ‡§∞ ‡§ú‡§≤‡•ç‡§¶ ‡§π‡•Ä ‡§Ü‡§™‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡§ï‡•á ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§ï‡•Ä ‡§™‡•Å‡§∑‡•ç‡§ü‡§ø ‡§ï‡§∞‡•á‡§ó‡§æ‡•§<br>
                        <strong>‡§¨‡§æ‡§ï‡•Ä ‚Çπ${onsiteBalance} ‡§°‡•ç‡§∞‡§æ‡§á‡§µ‡§∞ ‡§ï‡•ã ‡§¶‡•á‡§Ç‡•§</strong>
                    </div>
                </div>
            `;
            
            showMessage('success', successMessage);

            // Clear cart 
            cart = [];
            selectedVehicle = null;
            updateCartUI();
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            renderServices();
            updateCartUI();

            // Set minimum date to today
            const today = new Date().toISOString().split('T')[0];
            const preferredDateInput = document.getElementById('travel-date');
            if (preferredDateInput) {
                preferredDateInput.setAttribute('min', today);
            }

            // Cart button
            document.getElementById('cart-btn').addEventListener('click', showCartPopup);
            
            // Close buttons
            document.getElementById('close-cart').addEventListener('click', hideCartPopup);
            document.getElementById('close-checkout').addEventListener('click', hideCheckoutPopup);
            
            // Proceed to checkout (now links to the checkout popup)
            document.getElementById('proceed-checkout').addEventListener('click', showCheckoutPopup);
            
            // Checkout form submission
            document.getElementById('checkout-form').addEventListener('submit', function(e) {
                e.preventDefault();
                hideMessages(); // Clear old error messages
                
                const formData = {
                    customerName: document.getElementById('customer-name').value.trim(),
                    mobile: document.getElementById('mobile-number').value.trim(),
                    email: document.getElementById('email-id').value.trim(),
                    pickupLocation: document.getElementById('pickup-location').value.trim(),
                    dropLocation: document.getElementById('drop-location').value.trim(),
                    travelDate: document.getElementById('travel-date').value,
                    travelTime: document.getElementById('travel-time').value,
                    estimatedKm: parseInt(document.getElementById('estimated-km').value) || 0,
                    nightCharge: document.getElementById('night-charge').checked
                };
                
                // Validate form data
                const validationErrors = validateFormData(formData);
                if (validationErrors.length > 0) {
                    showMessage('error', '‚ùå ‡§ï‡•É‡§™‡§Ø‡§æ ‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡§Ø‡§æ‡§Å ‡§†‡•Ä‡§ï ‡§ï‡§∞‡•á‡§Ç:<br>' + validationErrors.join('<br>'));
                    return;
                }
                
                // Initiate Payment
                initiatePayment(formData);
            });

            // Close popups when clicking outside
            document.getElementById('cart-popup').addEventListener('click', function(e) {
                if (e.target === this) hideCartPopup();
            });
            
            document.getElementById('checkout-popup').addEventListener('click', function(e) {
                if (e.target === this) hideCheckoutPopup();
            });
            
            // Initialize SDKs
            initializeApp();
        });

        // Add smooth scrolling for better UX
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
 </body>

</html>
